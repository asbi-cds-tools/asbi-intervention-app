{
   "library" : {
      "identifier" : {
         "id" : "BriefInterventionAndReferralLogicLibrary",
         "version" : "1.0"
      },
      "schemaIdentifier" : {
         "id" : "urn:hl7-org:elm",
         "version" : "r1"
      },
      "usings" : {
         "def" : [ {
            "localIdentifier" : "System",
            "uri" : "urn:hl7-org:elm-types:r1"
         }, {
            "localIdentifier" : "FHIR",
            "uri" : "http://hl7.org/fhir",
            "version" : "4.0.0"
         } ]
      },
      "includes" : {
         "def" : [ {
            "localIdentifier" : "FHIRHelpers",
            "path" : "FHIRHelpers",
            "version" : "4.0.0"
         } ]
      },
      "codeSystems" : {
         "def" : [ {
            "name" : "LOINC",
            "id" : "http://loinc.org",
            "accessLevel" : "Public"
         }, {
            "name" : "SNOMED-CT",
            "id" : "http://snomed.info/sct",
            "accessLevel" : "Public"
         }, {
            "name" : "FHIR Condition Clinical Status",
            "id" : "http://terminology.hl7.org/CodeSystem/condition-clinical",
            "accessLevel" : "Public"
         }, {
            "name" : "FHIR Condition Verification Status",
            "id" : "http://terminology.hl7.org/CodeSystem/condition-ver-status",
            "accessLevel" : "Public"
         }, {
            "name" : "ADMINISTRATIVE GENDER",
            "id" : "http://terminology.hl7.org/CodeSystem/v3-AdministrativeGender",
            "accessLevel" : "Public"
         }, {
            "name" : "NULL FLAVOR",
            "id" : "http://terminology.hl7.org/CodeSystem/v3-NullFlavor",
            "accessLevel" : "Public"
         }, {
            "name" : "LOCAL",
            "id" : "http://www.cdc.gov/ncbddd/fasd",
            "accessLevel" : "Public"
         } ]
      },
      "valueSets" : {
         "def" : [ {
            "name" : "Pregnancy",
            "id" : "2.16.840.1.113883.3.526.3.378",
            "accessLevel" : "Public"
         }, {
            "name" : "Pregnancy (New ICD10 codes published in 2018 and 2019)",
            "id" : "2.16.840.1.113762.1.4.1032.80",
            "accessLevel" : "Public"
         }, {
            "name" : "Alcohol screening intervention",
            "id" : "2.16.840.1.113762.1.4.1032.124",
            "accessLevel" : "Public"
         } ]
      },
      "codes" : {
         "def" : [ {
            "name" : "Pregnancy status code",
            "id" : "82810-3",
            "display" : "Pregnancy status",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOINC"
            }
         }, {
            "name" : "Pregnant code",
            "id" : "77386006",
            "display" : "Patient currently pregnant (finding)",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "SNOMED-CT"
            }
         }, {
            "name" : "Confirmed verification status code",
            "id" : "confirmed",
            "display" : "Confirmed",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "FHIR Condition Verification Status"
            }
         }, {
            "name" : "Active clinical status code",
            "id" : "active",
            "display" : "Active",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "FHIR Condition Clinical Status"
            }
         }, {
            "name" : "Recurrence clinical status code",
            "id" : "recurrence",
            "display" : "Recurrence",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "FHIR Condition Clinical Status"
            }
         }, {
            "name" : "Relapse clinical status code",
            "id" : "relapse",
            "display" : "Relapse",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "FHIR Condition Clinical Status"
            }
         }, {
            "name" : "Inactive clinical status code",
            "id" : "inactive",
            "display" : "Inactive",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "FHIR Condition Clinical Status"
            }
         }, {
            "name" : "Remission clinical status code",
            "id" : "remission",
            "display" : "Remission",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "FHIR Condition Clinical Status"
            }
         }, {
            "name" : "Resolved clinical status code",
            "id" : "resolved",
            "display" : "Resolved",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "FHIR Condition Clinical Status"
            }
         }, {
            "name" : "Male administrative gender code",
            "id" : "M",
            "display" : "Male",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "ADMINISTRATIVE GENDER"
            }
         }, {
            "name" : "Female administrative gender code",
            "id" : "F",
            "display" : "Female",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "ADMINISTRATIVE GENDER"
            }
         }, {
            "name" : "Unknown value code",
            "id" : "UNK",
            "display" : "Unknown",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "NULL FLAVOR"
            }
         }, {
            "name" : "WHO AUDIT-C Total Score code",
            "id" : "75626-2",
            "display" : "WHO AUDIT-C Total Score",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOINC"
            }
         }, {
            "name" : "WHO AUDIT Total Score code",
            "id" : "75624-7",
            "display" : "WHO AUDIT Total Score",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOINC"
            }
         }, {
            "name" : "USAUDIT-C Total Score code",
            "id" : "UACS",
            "display" : "USAUDIT-C Total Score",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOCAL"
            }
         }, {
            "name" : "USAUDIT Total Score code",
            "id" : "UAFS",
            "display" : "USAUDIT Total Score",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOCAL"
            }
         }, {
            "name" : "Yes",
            "id" : "yes",
            "display" : "Yes",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOCAL"
            }
         }, {
            "name" : "No",
            "id" : "no",
            "display" : "No",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOCAL"
            }
         }, {
            "name" : "Never",
            "id" : "never",
            "display" : "Never",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOCAL"
            }
         }, {
            "name" : "Once or twice",
            "id" : "onceortwice",
            "display" : "Once or twice",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOCAL"
            }
         }, {
            "name" : "Monthly",
            "id" : "monthly",
            "display" : "Monthly",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOCAL"
            }
         }, {
            "name" : "Weekly",
            "id" : "weekly",
            "display" : "Weekly",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOCAL"
            }
         }, {
            "name" : "Daily or Almost Daily",
            "id" : "dailyoralmostdaily",
            "display" : "Daily or Almost Daily",
            "accessLevel" : "Public",
            "codeSystem" : {
               "name" : "LOCAL"
            }
         } ]
      },
      "concepts" : {
         "def" : [ {
            "name" : "Pregnancy status",
            "display" : "Pregnancy status",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "Pregnancy status code"
            } ]
         }, {
            "name" : "Pregnant",
            "display" : "Patient currently pregnant (finding)",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "Pregnant code"
            } ]
         }, {
            "name" : "Condition Confirmed",
            "display" : "Confirmed",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "Confirmed verification status code"
            } ]
         }, {
            "name" : "Condition Active",
            "display" : "Active",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "Active clinical status code"
            } ]
         }, {
            "name" : "Condition Recurrence",
            "display" : "Recurrence",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "Recurrence clinical status code"
            } ]
         }, {
            "name" : "Condition Relapse",
            "display" : "Relapse",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "Relapse clinical status code"
            } ]
         }, {
            "name" : "Condition Inactive",
            "display" : "Inactive",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "Inactive clinical status code"
            } ]
         }, {
            "name" : "Condition Remission",
            "display" : "Remission",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "Remission clinical status code"
            } ]
         }, {
            "name" : "Condition Resolved",
            "display" : "Resolved",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "Resolved clinical status code"
            } ]
         }, {
            "name" : "Alcohol screening codes",
            "display" : "Alcohol screening codes",
            "accessLevel" : "Public",
            "code" : [ {
               "name" : "WHO AUDIT-C Total Score code"
            }, {
               "name" : "WHO AUDIT Total Score code"
            }, {
               "name" : "USAUDIT-C Total Score code"
            }, {
               "name" : "USAUDIT Total Score code"
            } ]
         } ]
      },
      "statements" : {
         "def" : [ {
            "name" : "Patient",
            "context" : "Patient",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "dataType" : "{http://hl7.org/fhir}Patient",
                  "type" : "Retrieve"
               }
            }
         }, {
            "name" : "SexAtBirthExtension",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "type" : "Query",
                  "source" : [ {
                     "alias" : "Ext",
                     "expression" : {
                        "path" : "extension",
                        "type" : "Property",
                        "source" : {
                           "name" : "Patient",
                           "type" : "ExpressionRef"
                        }
                     }
                  } ],
                  "relationship" : [ ],
                  "where" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "path" : "url",
                        "scope" : "Ext",
                        "type" : "Property"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "http://hl7.org/fhir/us/core/StructureDefinition/us-core-birthsex",
                        "type" : "Literal"
                     } ]
                  }
               }
            }
         }, {
            "name" : "SexAtBirth",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Not",
                     "operand" : {
                        "type" : "IsNull",
                        "operand" : {
                           "name" : "SexAtBirthExtension",
                           "type" : "ExpressionRef"
                        }
                     }
                  }
               },
               "then" : {
                  "path" : "value",
                  "type" : "Property",
                  "source" : {
                     "path" : "value",
                     "type" : "Property",
                     "source" : {
                        "name" : "SexAtBirthExtension",
                        "type" : "ExpressionRef"
                     }
                  }
               },
               "else" : {
                  "type" : "As",
                  "operand" : {
                     "path" : "code",
                     "type" : "Property",
                     "source" : {
                        "name" : "Unknown value code",
                        "type" : "CodeRef"
                     }
                  },
                  "asTypeSpecifier" : {
                     "type" : "ChoiceTypeSpecifier",
                     "choice" : [ {
                        "name" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{urn:hl7-org:elm-types:r1}Time",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{http://hl7.org/fhir}CodeableConcept",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{http://hl7.org/fhir}Quantity",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{http://hl7.org/fhir}Range",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{http://hl7.org/fhir}Reference",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{urn:hl7-org:elm-types:r1}Integer",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{http://hl7.org/fhir}decimal",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{http://hl7.org/fhir}string",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{urn:hl7-org:elm-types:r1}Date",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{urn:hl7-org:elm-types:r1}String",
                        "type" : "NamedTypeSpecifier"
                     }, {
                        "name" : "{urn:hl7-org:elm-types:r1}Decimal",
                        "type" : "NamedTypeSpecifier"
                     } ]
                  }
               }
            }
         }, {
            "name" : "MaleAtBirth",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Equal",
               "operand" : [ {
                  "asType" : "{urn:hl7-org:elm-types:r1}String",
                  "type" : "As",
                  "operand" : {
                     "name" : "SexAtBirth",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "path" : "code",
                  "type" : "Property",
                  "source" : {
                     "name" : "Male administrative gender code",
                     "type" : "CodeRef"
                  }
               } ]
            }
         }, {
            "name" : "FemaleAtBirth",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Equal",
               "operand" : [ {
                  "asType" : "{urn:hl7-org:elm-types:r1}String",
                  "type" : "As",
                  "operand" : {
                     "name" : "SexAtBirth",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "path" : "code",
                  "type" : "Property",
                  "source" : {
                     "name" : "Female administrative gender code",
                     "type" : "CodeRef"
                  }
               } ]
            }
         }, {
            "name" : "SexAtBirthUnknown",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Equal",
               "operand" : [ {
                  "asType" : "{urn:hl7-org:elm-types:r1}String",
                  "type" : "As",
                  "operand" : {
                     "name" : "SexAtBirth",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "path" : "code",
                  "type" : "Property",
                  "source" : {
                     "name" : "Unknown value code",
                     "type" : "CodeRef"
                  }
               } ]
            }
         }, {
            "name" : "ToCode",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "expression" : {
               "name" : "ToCode",
               "libraryName" : "FHIRHelpers",
               "type" : "FunctionRef",
               "operand" : [ {
                  "name" : "coding",
                  "type" : "OperandRef"
               } ]
            },
            "operand" : [ {
               "name" : "coding",
               "operandTypeSpecifier" : {
                  "name" : "{http://hl7.org/fhir}Coding",
                  "type" : "NamedTypeSpecifier"
               }
            } ]
         }, {
            "name" : "ToConcept",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "expression" : {
               "name" : "ToConcept",
               "libraryName" : "FHIRHelpers",
               "type" : "FunctionRef",
               "operand" : [ {
                  "name" : "concept",
                  "type" : "OperandRef"
               } ]
            },
            "operand" : [ {
               "name" : "concept",
               "operandTypeSpecifier" : {
                  "name" : "{http://hl7.org/fhir}CodeableConcept",
                  "type" : "NamedTypeSpecifier"
               }
            } ]
         }, {
            "name" : "PeriodToInterval",
            "context" : "Patient",
            "accessLevel" : "Public",
            "type" : "FunctionDef",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "IsNull",
                     "operand" : {
                        "name" : "period",
                        "type" : "OperandRef"
                     }
                  }
               },
               "then" : {
                  "type" : "As",
                  "operand" : {
                     "type" : "Null"
                  },
                  "asTypeSpecifier" : {
                     "type" : "IntervalTypeSpecifier",
                     "pointType" : {
                        "name" : "{urn:hl7-org:elm-types:r1}DateTime",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               },
               "else" : {
                  "lowClosed" : true,
                  "highClosed" : true,
                  "type" : "Interval",
                  "low" : {
                     "path" : "value",
                     "type" : "Property",
                     "source" : {
                        "path" : "start",
                        "type" : "Property",
                        "source" : {
                           "name" : "period",
                           "type" : "OperandRef"
                        }
                     }
                  },
                  "high" : {
                     "path" : "value",
                     "type" : "Property",
                     "source" : {
                        "path" : "end",
                        "type" : "Property",
                        "source" : {
                           "name" : "period",
                           "type" : "OperandRef"
                        }
                     }
                  }
               }
            },
            "operand" : [ {
               "name" : "period",
               "operandTypeSpecifier" : {
                  "name" : "{http://hl7.org/fhir}Period",
                  "type" : "NamedTypeSpecifier"
               }
            } ]
         }, {
            "name" : "RecentAlcoholScreeningLookbackStart",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Subtract",
               "operand" : [ {
                  "type" : "Today"
               }, {
                  "value" : 1,
                  "unit" : "year",
                  "type" : "Quantity"
               } ]
            }
         }, {
            "name" : "PreviouslyCompletedQuestionnaireResponses",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "QR",
                  "expression" : {
                     "dataType" : "{http://hl7.org/fhir}QuestionnaireResponse",
                     "type" : "Retrieve"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "And",
                  "operand" : [ {
                     "type" : "And",
                     "operand" : [ {
                        "type" : "And",
                        "operand" : [ {
                           "type" : "GreaterOrEqual",
                           "operand" : [ {
                              "type" : "DateFrom",
                              "operand" : {
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "path" : "authored",
                                    "scope" : "QR",
                                    "type" : "Property"
                                 }
                              }
                           }, {
                              "name" : "RecentAlcoholScreeningLookbackStart",
                              "type" : "ExpressionRef"
                           } ]
                        }, {
                           "type" : "LessOrEqual",
                           "operand" : [ {
                              "type" : "DateFrom",
                              "operand" : {
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "path" : "authored",
                                    "scope" : "QR",
                                    "type" : "Property"
                                 }
                              }
                           }, {
                              "type" : "Today"
                           } ]
                        } ]
                     }, {
                        "type" : "In",
                        "operand" : [ {
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "path" : "status",
                              "scope" : "QR",
                              "type" : "Property"
                           }
                        }, {
                           "type" : "List",
                           "element" : [ {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "completed",
                              "type" : "Literal"
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "amended",
                              "type" : "Literal"
                           } ]
                        } ]
                     } ]
                  }, {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "Or",
                        "operand" : [ {
                           "type" : "Equal",
                           "operand" : [ {
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "path" : "questionnaire",
                                 "scope" : "QR",
                                 "type" : "Property"
                              }
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "http://www.cdc.gov/ncbddd/fasd/usaudit",
                              "type" : "Literal"
                           } ]
                        }, {
                           "type" : "Equal",
                           "operand" : [ {
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "path" : "questionnaire",
                                 "scope" : "QR",
                                 "type" : "Property"
                              }
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "http://www.cdc.gov/ncbddd/fasd/audit",
                              "type" : "Literal"
                           } ]
                        } ]
                     }, {
                        "type" : "Equal",
                        "operand" : [ {
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "path" : "questionnaire",
                              "scope" : "QR",
                              "type" : "Property"
                           }
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "http://www.cdc.gov/ncbddd/fasd/nidaqs2usaudit",
                           "type" : "Literal"
                        } ]
                     } ]
                  } ]
               },
               "sort" : {
                  "by" : [ {
                     "direction" : "asc",
                     "path" : "authored",
                     "type" : "ByColumn"
                  } ]
               }
            }
         }, {
            "name" : "MostRecentlyCompletedQuestionnaireResponse",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Last",
               "source" : {
                  "name" : "PreviouslyCompletedQuestionnaireResponses",
                  "type" : "ExpressionRef"
               }
            }
         }, {
            "name" : "MostRecentQuestionnaireURL",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "path" : "value",
               "type" : "Property",
               "source" : {
                  "path" : "questionnaire",
                  "type" : "Property",
                  "source" : {
                     "name" : "MostRecentlyCompletedQuestionnaireResponse",
                     "type" : "ExpressionRef"
                  }
               }
            }
         }, {
            "name" : "DateOfMostRecentQuestionnaireResponse",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "QR",
                  "expression" : {
                     "name" : "MostRecentlyCompletedQuestionnaireResponse",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "return" : {
                  "expression" : {
                     "type" : "DateFrom",
                     "operand" : {
                        "path" : "value",
                        "type" : "Property",
                        "source" : {
                           "path" : "authored",
                           "scope" : "QR",
                           "type" : "Property"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "MostRecentResponseItems",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "QR",
                  "expression" : {
                     "name" : "MostRecentlyCompletedQuestionnaireResponse",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "return" : {
                  "distinct" : false,
                  "expression" : {
                     "path" : "item",
                     "scope" : "QR",
                     "type" : "Property"
                  }
               }
            }
         }, {
            "name" : "MostRecentResponseValues",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "T",
                  "expression" : {
                     "type" : "Flatten",
                     "operand" : {
                        "type" : "Query",
                        "source" : [ {
                           "alias" : "X",
                           "expression" : {
                              "name" : "MostRecentResponseItems",
                              "type" : "ExpressionRef"
                           }
                        } ],
                        "return" : {
                           "distinct" : false,
                           "expression" : {
                              "type" : "ToList",
                              "operand" : {
                                 "name" : "X",
                                 "type" : "AliasRef"
                              }
                           }
                        }
                     }
                  }
               } ],
               "relationship" : [ ],
               "return" : {
                  "distinct" : false,
                  "expression" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "id",
                        "value" : {
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "path" : "linkId",
                              "scope" : "T",
                              "type" : "Property"
                           }
                        }
                     }, {
                        "name" : "answer",
                        "value" : {
                           "type" : "Indexer",
                           "operand" : [ {
                              "type" : "Query",
                              "source" : [ {
                                 "alias" : "$this",
                                 "expression" : {
                                    "path" : "answer",
                                    "scope" : "T",
                                    "type" : "Property"
                                 }
                              } ],
                              "where" : {
                                 "type" : "Not",
                                 "operand" : {
                                    "type" : "IsNull",
                                    "operand" : {
                                       "path" : "value",
                                       "type" : "Property",
                                       "source" : {
                                          "name" : "$this",
                                          "type" : "AliasRef"
                                       }
                                    }
                                 }
                              },
                              "return" : {
                                 "expression" : {
                                    "path" : "value",
                                    "type" : "Property",
                                    "source" : {
                                       "name" : "$this",
                                       "type" : "AliasRef"
                                    }
                                 }
                              }
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "0",
                              "type" : "Literal"
                           } ]
                        }
                     } ]
                  }
               }
            }
         }, {
            "name" : "RecentScoreUsAuditC",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "type" : "Query",
                  "source" : [ {
                     "alias" : "RV",
                     "expression" : {
                        "name" : "MostRecentResponseValues",
                        "type" : "ExpressionRef"
                     }
                  } ],
                  "relationship" : [ ],
                  "where" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "path" : "id",
                        "scope" : "RV",
                        "type" : "Property"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "usauditc-score",
                        "type" : "Literal"
                     } ]
                  },
                  "return" : {
                     "expression" : {
                        "path" : "value",
                        "type" : "Property",
                        "source" : {
                           "path" : "answer",
                           "scope" : "RV",
                           "type" : "Property"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "HasRecentScoreUsAuditC",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Not",
               "operand" : {
                  "type" : "IsNull",
                  "operand" : {
                     "name" : "RecentScoreUsAuditC",
                     "type" : "ExpressionRef"
                  }
               }
            }
         }, {
            "name" : "RecentScoreFullUsAudit",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "type" : "Query",
                  "source" : [ {
                     "alias" : "RV",
                     "expression" : {
                        "name" : "MostRecentResponseValues",
                        "type" : "ExpressionRef"
                     }
                  } ],
                  "relationship" : [ ],
                  "where" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "path" : "id",
                        "scope" : "RV",
                        "type" : "Property"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "usaudit-score",
                        "type" : "Literal"
                     } ]
                  },
                  "return" : {
                     "expression" : {
                        "path" : "value",
                        "type" : "Property",
                        "source" : {
                           "path" : "answer",
                           "scope" : "RV",
                           "type" : "Property"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "HasRecentScoreFullUsAudit",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Not",
               "operand" : {
                  "type" : "IsNull",
                  "operand" : {
                     "name" : "RecentScoreFullUsAudit",
                     "type" : "ExpressionRef"
                  }
               }
            }
         }, {
            "name" : "RecentScoreAuditC",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "type" : "Query",
                  "source" : [ {
                     "alias" : "RV",
                     "expression" : {
                        "name" : "MostRecentResponseValues",
                        "type" : "ExpressionRef"
                     }
                  } ],
                  "relationship" : [ ],
                  "where" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "path" : "id",
                        "scope" : "RV",
                        "type" : "Property"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "auditc-score",
                        "type" : "Literal"
                     } ]
                  },
                  "return" : {
                     "expression" : {
                        "path" : "value",
                        "type" : "Property",
                        "source" : {
                           "path" : "answer",
                           "scope" : "RV",
                           "type" : "Property"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "HasRecentScoreAuditC",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Not",
               "operand" : {
                  "type" : "IsNull",
                  "operand" : {
                     "name" : "RecentScoreAuditC",
                     "type" : "ExpressionRef"
                  }
               }
            }
         }, {
            "name" : "RecentScoreFullAudit",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "type" : "Query",
                  "source" : [ {
                     "alias" : "RV",
                     "expression" : {
                        "name" : "MostRecentResponseValues",
                        "type" : "ExpressionRef"
                     }
                  } ],
                  "relationship" : [ ],
                  "where" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "path" : "id",
                        "scope" : "RV",
                        "type" : "Property"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "audit-score",
                        "type" : "Literal"
                     } ]
                  },
                  "return" : {
                     "expression" : {
                        "path" : "value",
                        "type" : "Property",
                        "source" : {
                           "path" : "answer",
                           "scope" : "RV",
                           "type" : "Property"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "HasRecentScoreFullAudit",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Not",
               "operand" : {
                  "type" : "IsNull",
                  "operand" : {
                     "name" : "RecentScoreFullAudit",
                     "type" : "ExpressionRef"
                  }
               }
            }
         }, {
            "name" : "RecentApsResponses",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "RV",
                  "expression" : {
                     "name" : "MostRecentResponseValues",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Equal",
                  "operand" : [ {
                     "path" : "id",
                     "scope" : "RV",
                     "type" : "Property"
                  }, {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "prescreen-question",
                     "type" : "Literal"
                  } ]
               },
               "return" : {
                  "expression" : {
                     "path" : "answer",
                     "scope" : "RV",
                     "type" : "Property"
                  }
               }
            }
         }, {
            "name" : "RecentApsYesResponses",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "R",
                  "expression" : {
                     "name" : "RecentApsResponses",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Equivalent",
                  "operand" : [ {
                     "name" : "ToCode",
                     "libraryName" : "FHIRHelpers",
                     "type" : "FunctionRef",
                     "operand" : [ {
                        "asType" : "{http://hl7.org/fhir}Coding",
                        "type" : "As",
                        "operand" : {
                           "name" : "R",
                           "type" : "AliasRef"
                        }
                     } ]
                  }, {
                     "name" : "Yes",
                     "type" : "CodeRef"
                  } ]
               }
            }
         }, {
            "name" : "RecentApsNoResponses",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "R",
                  "expression" : {
                     "name" : "RecentApsResponses",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Equivalent",
                  "operand" : [ {
                     "name" : "ToCode",
                     "libraryName" : "FHIRHelpers",
                     "type" : "FunctionRef",
                     "operand" : [ {
                        "asType" : "{http://hl7.org/fhir}Coding",
                        "type" : "As",
                        "operand" : {
                           "name" : "R",
                           "type" : "AliasRef"
                        }
                     } ]
                  }, {
                     "name" : "No",
                     "type" : "CodeRef"
                  } ]
               }
            }
         }, {
            "name" : "HasRecentYesApsResponse",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Exists",
               "operand" : {
                  "name" : "RecentApsYesResponses",
                  "type" : "ExpressionRef"
               }
            }
         }, {
            "name" : "HasRecentNoApsResponse",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Exists",
               "operand" : {
                  "name" : "RecentApsNoResponses",
                  "type" : "ExpressionRef"
               }
            }
         }, {
            "name" : "RecentUsauditQuestionOneResponses",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "RV",
                  "expression" : {
                     "name" : "MostRecentResponseValues",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Equal",
                  "operand" : [ {
                     "path" : "id",
                     "scope" : "RV",
                     "type" : "Property"
                  }, {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "usaudit-question-one",
                     "type" : "Literal"
                  } ]
               },
               "return" : {
                  "expression" : {
                     "path" : "answer",
                     "scope" : "RV",
                     "type" : "Property"
                  }
               }
            }
         }, {
            "name" : "RecentAuditQuestionOneResponses",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "RV",
                  "expression" : {
                     "name" : "MostRecentResponseValues",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Equal",
                  "operand" : [ {
                     "path" : "id",
                     "scope" : "RV",
                     "type" : "Property"
                  }, {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "audit-question-one",
                     "type" : "Literal"
                  } ]
               },
               "return" : {
                  "expression" : {
                     "path" : "answer",
                     "scope" : "RV",
                     "type" : "Property"
                  }
               }
            }
         }, {
            "name" : "HasRecentNeverResponseUsauditQuestionOne",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "In",
               "operand" : [ {
                  "name" : "Never",
                  "type" : "CodeRef"
               }, {
                  "type" : "Query",
                  "source" : [ {
                     "alias" : "X",
                     "expression" : {
                        "name" : "RecentUsauditQuestionOneResponses",
                        "type" : "ExpressionRef"
                     }
                  } ],
                  "return" : {
                     "distinct" : false,
                     "expression" : {
                        "name" : "ToCode",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "asType" : "{http://hl7.org/fhir}Coding",
                           "type" : "As",
                           "operand" : {
                              "name" : "X",
                              "type" : "AliasRef"
                           }
                        } ]
                     }
                  }
               } ]
            }
         }, {
            "name" : "HasRecentNeverResponseAuditQuestionOne",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "In",
               "operand" : [ {
                  "name" : "Never",
                  "type" : "CodeRef"
               }, {
                  "type" : "Query",
                  "source" : [ {
                     "alias" : "X",
                     "expression" : {
                        "name" : "RecentAuditQuestionOneResponses",
                        "type" : "ExpressionRef"
                     }
                  } ],
                  "return" : {
                     "distinct" : false,
                     "expression" : {
                        "name" : "ToCode",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "asType" : "{http://hl7.org/fhir}Coding",
                           "type" : "As",
                           "operand" : {
                              "name" : "X",
                              "type" : "AliasRef"
                           }
                        } ]
                     }
                  }
               } ]
            }
         }, {
            "name" : "RecentAlcoholScreeningObservations",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "O",
                  "expression" : {
                     "dataType" : "{http://hl7.org/fhir}Observation",
                     "codeProperty" : "code",
                     "type" : "Retrieve",
                     "codes" : {
                        "type" : "ToList",
                        "operand" : {
                           "name" : "Alcohol screening codes",
                           "type" : "ConceptRef"
                        }
                     }
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "And",
                  "operand" : [ {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "And",
                        "operand" : [ {
                           "type" : "GreaterOrEqual",
                           "operand" : [ {
                              "type" : "DateFrom",
                              "operand" : {
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "path" : "effective",
                                    "scope" : "O",
                                    "type" : "Property"
                                 }
                              }
                           }, {
                              "name" : "RecentAlcoholScreeningLookbackStart",
                              "type" : "ExpressionRef"
                           } ]
                        }, {
                           "type" : "LessOrEqual",
                           "operand" : [ {
                              "type" : "DateFrom",
                              "operand" : {
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "path" : "effective",
                                    "scope" : "O",
                                    "type" : "Property"
                                 }
                              }
                           }, {
                              "type" : "Today"
                           } ]
                        } ]
                     }, {
                        "type" : "And",
                        "operand" : [ {
                           "type" : "GreaterOrEqual",
                           "operand" : [ {
                              "type" : "DateFrom",
                              "operand" : {
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "path" : "issued",
                                    "scope" : "O",
                                    "type" : "Property"
                                 }
                              }
                           }, {
                              "name" : "RecentAlcoholScreeningLookbackStart",
                              "type" : "ExpressionRef"
                           } ]
                        }, {
                           "type" : "LessOrEqual",
                           "operand" : [ {
                              "type" : "DateFrom",
                              "operand" : {
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "path" : "issued",
                                    "scope" : "O",
                                    "type" : "Property"
                                 }
                              }
                           }, {
                              "type" : "Today"
                           } ]
                        } ]
                     } ]
                  }, {
                     "type" : "In",
                     "operand" : [ {
                        "path" : "value",
                        "type" : "Property",
                        "source" : {
                           "path" : "status",
                           "scope" : "O",
                           "type" : "Property"
                        }
                     }, {
                        "type" : "List",
                        "element" : [ {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "final",
                           "type" : "Literal"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "corrected",
                           "type" : "Literal"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "amended",
                           "type" : "Literal"
                        } ]
                     } ]
                  } ]
               },
               "sort" : {
                  "by" : [ {
                     "direction" : "asc",
                     "type" : "ByExpression",
                     "expression" : {
                        "type" : "DateFrom",
                        "operand" : {
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "type" : "Coalesce",
                              "operand" : [ {
                                 "asType" : "{http://hl7.org/fhir}instant",
                                 "type" : "As",
                                 "operand" : {
                                    "name" : "effective",
                                    "type" : "IdentifierRef"
                                 }
                              }, {
                                 "name" : "issued",
                                 "type" : "IdentifierRef"
                              } ]
                           }
                        }
                     }
                  } ]
               }
            }
         }, {
            "name" : "HasRecentAlcoholScreeningObservations",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Exists",
               "operand" : {
                  "name" : "RecentAlcoholScreeningObservations",
                  "type" : "ExpressionRef"
               }
            }
         }, {
            "name" : "MostRecentAlcoholScreeningObservation",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Last",
               "source" : {
                  "name" : "RecentAlcoholScreeningObservations",
                  "type" : "ExpressionRef"
               }
            }
         }, {
            "name" : "DateOfMostRecentAlcoholScreeningObservation",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "DateFrom",
               "operand" : {
                  "path" : "value",
                  "type" : "Property",
                  "source" : {
                     "type" : "Coalesce",
                     "operand" : [ {
                        "asType" : "{http://hl7.org/fhir}instant",
                        "type" : "As",
                        "operand" : {
                           "path" : "effective",
                           "type" : "Property",
                           "source" : {
                              "name" : "MostRecentAlcoholScreeningObservation",
                              "type" : "ExpressionRef"
                           }
                        }
                     }, {
                        "path" : "issued",
                        "type" : "Property",
                        "source" : {
                           "name" : "MostRecentAlcoholScreeningObservation",
                           "type" : "ExpressionRef"
                        }
                     } ]
                  }
               }
            }
         }, {
            "name" : "HasEvidenceOfRecentAlcoholScreening",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Or",
               "operand" : [ {
                  "type" : "Or",
                  "operand" : [ {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "Or",
                        "operand" : [ {
                           "type" : "Or",
                           "operand" : [ {
                              "type" : "Or",
                              "operand" : [ {
                                 "name" : "HasRecentScoreUsAuditC",
                                 "type" : "ExpressionRef"
                              }, {
                                 "name" : "HasRecentScoreFullUsAudit",
                                 "type" : "ExpressionRef"
                              } ]
                           }, {
                              "name" : "HasRecentScoreAuditC",
                              "type" : "ExpressionRef"
                           } ]
                        }, {
                           "name" : "HasRecentScoreFullAudit",
                           "type" : "ExpressionRef"
                        } ]
                     }, {
                        "name" : "HasRecentNoApsResponse",
                        "type" : "ExpressionRef"
                     } ]
                  }, {
                     "type" : "And",
                     "operand" : [ {
                        "name" : "HasRecentYesApsResponse",
                        "type" : "ExpressionRef"
                     }, {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "HasRecentNeverResponseUsauditQuestionOne",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "HasRecentNeverResponseAuditQuestionOne",
                           "type" : "ExpressionRef"
                        } ]
                     } ]
                  } ]
               }, {
                  "name" : "HasRecentAlcoholScreeningObservations",
                  "type" : "ExpressionRef"
               } ]
            }
         }, {
            "name" : "IsIncluded",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "And",
               "operand" : [ {
                  "type" : "GreaterOrEqual",
                  "operand" : [ {
                     "precision" : "Year",
                     "type" : "CalculateAge",
                     "operand" : {
                        "path" : "birthDate.value",
                        "type" : "Property",
                        "source" : {
                           "name" : "Patient",
                           "type" : "ExpressionRef"
                        }
                     }
                  }, {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "18",
                     "type" : "Literal"
                  } ]
               }, {
                  "name" : "HasEvidenceOfRecentAlcoholScreening",
                  "type" : "ExpressionRef"
               } ]
            }
         }, {
            "name" : "MostRecentAlcoholScreeningDate",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Not",
                     "operand" : {
                        "type" : "IsNull",
                        "operand" : {
                           "name" : "DateOfMostRecentQuestionnaireResponse",
                           "type" : "ExpressionRef"
                        }
                     }
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Not",
                        "operand" : {
                           "type" : "IsNull",
                           "operand" : {
                              "name" : "DateOfMostRecentAlcoholScreeningObservation",
                              "type" : "ExpressionRef"
                           }
                        }
                     }
                  },
                  "then" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "type" : "SameOrAfter",
                           "operand" : [ {
                              "name" : "DateOfMostRecentQuestionnaireResponse",
                              "type" : "ExpressionRef"
                           }, {
                              "name" : "DateOfMostRecentAlcoholScreeningObservation",
                              "type" : "ExpressionRef"
                           } ]
                        }
                     },
                     "then" : {
                        "name" : "DateOfMostRecentQuestionnaireResponse",
                        "type" : "ExpressionRef"
                     },
                     "else" : {
                        "name" : "DateOfMostRecentAlcoholScreeningObservation",
                        "type" : "ExpressionRef"
                     }
                  },
                  "else" : {
                     "name" : "DateOfMostRecentQuestionnaireResponse",
                     "type" : "ExpressionRef"
                  }
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Not",
                        "operand" : {
                           "type" : "IsNull",
                           "operand" : {
                              "name" : "DateOfMostRecentAlcoholScreeningObservation",
                              "type" : "ExpressionRef"
                           }
                        }
                     }
                  },
                  "then" : {
                     "name" : "DateOfMostRecentAlcoholScreeningObservation",
                     "type" : "ExpressionRef"
                  },
                  "else" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Date",
                     "type" : "As",
                     "operand" : {
                        "type" : "Null"
                     }
                  }
               }
            }
         }, {
            "name" : "BriefInterventionsSinceLastScreening",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "P",
                  "expression" : {
                     "dataType" : "{http://hl7.org/fhir}Procedure",
                     "codeProperty" : "code",
                     "type" : "Retrieve",
                     "codes" : {
                        "name" : "Alcohol screening intervention",
                        "type" : "ValueSetRef"
                     }
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "And",
                  "operand" : [ {
                     "type" : "Equal",
                     "operand" : [ {
                        "path" : "value",
                        "type" : "Property",
                        "source" : {
                           "path" : "status",
                           "scope" : "P",
                           "type" : "Property"
                        }
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "completed",
                        "type" : "Literal"
                     } ]
                  }, {
                     "type" : "SameOrAfter",
                     "operand" : [ {
                        "type" : "DateFrom",
                        "operand" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}DateTime",
                           "type" : "As",
                           "operand" : {
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "path" : "performed",
                                 "scope" : "P",
                                 "type" : "Property"
                              }
                           }
                        }
                     }, {
                        "name" : "MostRecentAlcoholScreeningDate",
                        "type" : "ExpressionRef"
                     } ]
                  } ]
               }
            }
         }, {
            "name" : "Excluded",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Exists",
               "operand" : {
                  "name" : "BriefInterventionsSinceLastScreening",
                  "type" : "ExpressionRef"
               }
            }
         }, {
            "name" : "PregnancyObservations",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "P",
                  "expression" : {
                     "dataType" : "{http://hl7.org/fhir}Observation",
                     "codeProperty" : "code",
                     "type" : "Retrieve",
                     "codes" : {
                        "type" : "ToList",
                        "operand" : {
                           "name" : "Pregnancy status",
                           "type" : "ConceptRef"
                        }
                     }
                  }
               } ],
               "let" : [ {
                  "identifier" : "lookback",
                  "expression" : {
                     "lowClosed" : true,
                     "highClosed" : true,
                     "type" : "Interval",
                     "low" : {
                        "type" : "Subtract",
                        "operand" : [ {
                           "type" : "Now"
                        }, {
                           "value" : 42,
                           "unit" : "weeks",
                           "type" : "Quantity"
                        } ]
                     },
                     "high" : {
                        "type" : "Now"
                     }
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "And",
                  "operand" : [ {
                     "type" : "And",
                     "operand" : [ {
                        "type" : "Or",
                        "operand" : [ {
                           "type" : "In",
                           "operand" : [ {
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "strict" : false,
                                 "type" : "As",
                                 "operand" : {
                                    "path" : "effective",
                                    "scope" : "P",
                                    "type" : "Property"
                                 },
                                 "asTypeSpecifier" : {
                                    "name" : "{http://hl7.org/fhir}dateTime",
                                    "type" : "NamedTypeSpecifier"
                                 }
                              }
                           }, {
                              "name" : "lookback",
                              "type" : "QueryLetRef"
                           } ]
                        }, {
                           "type" : "In",
                           "operand" : [ {
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "path" : "issued",
                                 "scope" : "P",
                                 "type" : "Property"
                              }
                           }, {
                              "name" : "lookback",
                              "type" : "QueryLetRef"
                           } ]
                        } ]
                     }, {
                        "type" : "Equivalent",
                        "operand" : [ {
                           "name" : "ToConcept",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "strict" : false,
                              "type" : "As",
                              "operand" : {
                                 "path" : "value",
                                 "scope" : "P",
                                 "type" : "Property"
                              },
                              "asTypeSpecifier" : {
                                 "name" : "{http://hl7.org/fhir}CodeableConcept",
                                 "type" : "NamedTypeSpecifier"
                              }
                           } ]
                        }, {
                           "name" : "Pregnant",
                           "type" : "ConceptRef"
                        } ]
                     } ]
                  }, {
                     "type" : "In",
                     "operand" : [ {
                        "path" : "value",
                        "type" : "Property",
                        "source" : {
                           "path" : "status",
                           "scope" : "P",
                           "type" : "Property"
                        }
                     }, {
                        "type" : "List",
                        "element" : [ {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "final",
                           "type" : "Literal"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "corrected",
                           "type" : "Literal"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "amended",
                           "type" : "Literal"
                        } ]
                     } ]
                  } ]
               }
            }
         }, {
            "name" : "PregnancyConditions",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "C",
                  "expression" : {
                     "type" : "Union",
                     "operand" : [ {
                        "dataType" : "{http://hl7.org/fhir}Condition",
                        "codeProperty" : "code",
                        "type" : "Retrieve",
                        "codes" : {
                           "name" : "Pregnancy",
                           "type" : "ValueSetRef"
                        }
                     }, {
                        "dataType" : "{http://hl7.org/fhir}Condition",
                        "codeProperty" : "code",
                        "type" : "Retrieve",
                        "codes" : {
                           "name" : "Pregnancy (New ICD10 codes published in 2018 and 2019)",
                           "type" : "ValueSetRef"
                        }
                     } ]
                  }
               } ],
               "let" : [ {
                  "identifier" : "lookback",
                  "expression" : {
                     "lowClosed" : true,
                     "highClosed" : true,
                     "type" : "Interval",
                     "low" : {
                        "type" : "Subtract",
                        "operand" : [ {
                           "type" : "Now"
                        }, {
                           "value" : 42,
                           "unit" : "weeks",
                           "type" : "Quantity"
                        } ]
                     },
                     "high" : {
                        "type" : "Now"
                     }
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "And",
                  "operand" : [ {
                     "type" : "And",
                     "operand" : [ {
                        "type" : "Or",
                        "operand" : [ {
                           "type" : "Or",
                           "operand" : [ {
                              "type" : "In",
                              "operand" : [ {
                                 "path" : "value",
                                 "type" : "Property",
                                 "source" : {
                                    "strict" : false,
                                    "type" : "As",
                                    "operand" : {
                                       "path" : "onset",
                                       "scope" : "C",
                                       "type" : "Property"
                                    },
                                    "asTypeSpecifier" : {
                                       "name" : "{http://hl7.org/fhir}dateTime",
                                       "type" : "NamedTypeSpecifier"
                                    }
                                 }
                              }, {
                                 "name" : "lookback",
                                 "type" : "QueryLetRef"
                              } ]
                           }, {
                              "type" : "Overlaps",
                              "operand" : [ {
                                 "name" : "PeriodToInterval",
                                 "type" : "FunctionRef",
                                 "operand" : [ {
                                    "strict" : false,
                                    "type" : "As",
                                    "operand" : {
                                       "path" : "onset",
                                       "scope" : "C",
                                       "type" : "Property"
                                    },
                                    "asTypeSpecifier" : {
                                       "name" : "{http://hl7.org/fhir}Period",
                                       "type" : "NamedTypeSpecifier"
                                    }
                                 } ]
                              }, {
                                 "name" : "lookback",
                                 "type" : "QueryLetRef"
                              } ]
                           } ]
                        }, {
                           "type" : "In",
                           "operand" : [ {
                              "path" : "value",
                              "type" : "Property",
                              "source" : {
                                 "path" : "recordedDate",
                                 "scope" : "C",
                                 "type" : "Property"
                              }
                           }, {
                              "name" : "lookback",
                              "type" : "QueryLetRef"
                           } ]
                        } ]
                     }, {
                        "type" : "Or",
                        "operand" : [ {
                           "type" : "Equivalent",
                           "operand" : [ {
                              "name" : "ToConcept",
                              "libraryName" : "FHIRHelpers",
                              "type" : "FunctionRef",
                              "operand" : [ {
                                 "path" : "clinicalStatus",
                                 "scope" : "C",
                                 "type" : "Property"
                              } ]
                           }, {
                              "name" : "Condition Active",
                              "type" : "ConceptRef"
                           } ]
                        }, {
                           "type" : "Equivalent",
                           "operand" : [ {
                              "name" : "ToConcept",
                              "libraryName" : "FHIRHelpers",
                              "type" : "FunctionRef",
                              "operand" : [ {
                                 "path" : "clinicalStatus",
                                 "scope" : "C",
                                 "type" : "Property"
                              } ]
                           }, {
                              "name" : "Condition Recurrence",
                              "type" : "ConceptRef"
                           } ]
                        } ]
                     } ]
                  }, {
                     "type" : "Equivalent",
                     "operand" : [ {
                        "name" : "ToConcept",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "path" : "verificationStatus",
                           "scope" : "C",
                           "type" : "Property"
                        } ]
                     }, {
                        "name" : "Condition Confirmed",
                        "type" : "ConceptRef"
                     } ]
                  } ]
               }
            }
         }, {
            "name" : "RecentPregnancyQuestionResponse",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "RV",
                  "expression" : {
                     "name" : "MostRecentResponseValues",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Equal",
                  "operand" : [ {
                     "path" : "id",
                     "scope" : "RV",
                     "type" : "Property"
                  }, {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "pregnancy-question",
                     "type" : "Literal"
                  } ]
               },
               "return" : {
                  "expression" : {
                     "path" : "answer",
                     "scope" : "RV",
                     "type" : "Property"
                  }
               }
            }
         }, {
            "name" : "HasRecentYesToPregnancyQuestion",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "In",
               "operand" : [ {
                  "name" : "Yes",
                  "type" : "CodeRef"
               }, {
                  "type" : "Query",
                  "source" : [ {
                     "alias" : "X",
                     "expression" : {
                        "name" : "RecentPregnancyQuestionResponse",
                        "type" : "ExpressionRef"
                     }
                  } ],
                  "return" : {
                     "distinct" : false,
                     "expression" : {
                        "name" : "ToCode",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "asType" : "{http://hl7.org/fhir}Coding",
                           "type" : "As",
                           "operand" : {
                              "name" : "X",
                              "type" : "AliasRef"
                           }
                        } ]
                     }
                  }
               } ]
            }
         }, {
            "name" : "DoesMeetPregnancyInclusionCriteria",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Or",
               "operand" : [ {
                  "type" : "Or",
                  "operand" : [ {
                     "type" : "Exists",
                     "operand" : {
                        "name" : "PregnancyObservations",
                        "type" : "ExpressionRef"
                     }
                  }, {
                     "type" : "Exists",
                     "operand" : {
                        "name" : "PregnancyConditions",
                        "type" : "ExpressionRef"
                     }
                  } ]
               }, {
                  "name" : "HasRecentYesToPregnancyQuestion",
                  "type" : "ExpressionRef"
               } ]
            }
         }, {
            "name" : "MostRecentQuestionnaire",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "type" : "Query",
                  "source" : [ {
                     "alias" : "Q",
                     "expression" : {
                        "dataType" : "{http://hl7.org/fhir}Questionnaire",
                        "type" : "Retrieve"
                     }
                  } ],
                  "relationship" : [ ],
                  "where" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "path" : "value",
                        "type" : "Property",
                        "source" : {
                           "path" : "url",
                           "scope" : "Q",
                           "type" : "Property"
                        }
                     }, {
                        "name" : "MostRecentQuestionnaireURL",
                        "type" : "ExpressionRef"
                     } ]
                  }
               }
            }
         }, {
            "name" : "MostRecentQuestionnaireItems",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "Q",
                  "expression" : {
                     "name" : "MostRecentQuestionnaire",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "return" : {
                  "distinct" : false,
                  "expression" : {
                     "path" : "item",
                     "scope" : "Q",
                     "type" : "Property"
                  }
               }
            }
         }, {
            "name" : "MostRecentQuestionText",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "T",
                  "expression" : {
                     "type" : "Flatten",
                     "operand" : {
                        "type" : "Query",
                        "source" : [ {
                           "alias" : "X",
                           "expression" : {
                              "name" : "MostRecentQuestionnaireItems",
                              "type" : "ExpressionRef"
                           }
                        } ],
                        "return" : {
                           "distinct" : false,
                           "expression" : {
                              "type" : "ToList",
                              "operand" : {
                                 "name" : "X",
                                 "type" : "AliasRef"
                              }
                           }
                        }
                     }
                  }
               } ],
               "relationship" : [ ],
               "return" : {
                  "distinct" : false,
                  "expression" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "id",
                        "value" : {
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "path" : "linkId",
                              "scope" : "T",
                              "type" : "Property"
                           }
                        }
                     }, {
                        "name" : "question",
                        "value" : {
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "path" : "text",
                              "scope" : "T",
                              "type" : "Property"
                           }
                        }
                     } ]
                  }
               }
            }
         }, {
            "name" : "QuestionResponsePairs",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "QT",
                  "expression" : {
                     "name" : "MostRecentQuestionText",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "alias" : "RV",
                  "expression" : {
                     "name" : "MostRecentResponseValues",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "And",
                  "operand" : [ {
                     "type" : "Equal",
                     "operand" : [ {
                        "path" : "id",
                        "scope" : "QT",
                        "type" : "Property"
                     }, {
                        "path" : "id",
                        "scope" : "RV",
                        "type" : "Property"
                     } ]
                  }, {
                     "type" : "Not",
                     "operand" : {
                        "type" : "IsNull",
                        "operand" : {
                           "path" : "display",
                           "type" : "Property",
                           "source" : {
                              "strict" : false,
                              "type" : "As",
                              "operand" : {
                                 "path" : "answer",
                                 "scope" : "RV",
                                 "type" : "Property"
                              },
                              "asTypeSpecifier" : {
                                 "name" : "{http://hl7.org/fhir}Coding",
                                 "type" : "NamedTypeSpecifier"
                              }
                           }
                        }
                     }
                  } ]
               },
               "return" : {
                  "expression" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "id",
                        "value" : {
                           "path" : "id",
                           "scope" : "QT",
                           "type" : "Property"
                        }
                     }, {
                        "name" : "question",
                        "value" : {
                           "path" : "question",
                           "scope" : "QT",
                           "type" : "Property"
                        }
                     }, {
                        "name" : "answer",
                        "value" : {
                           "path" : "value",
                           "type" : "Property",
                           "source" : {
                              "path" : "display",
                              "type" : "Property",
                              "source" : {
                                 "path" : "answer",
                                 "scope" : "RV",
                                 "type" : "Property"
                              }
                           }
                        }
                     } ]
                  }
               }
            }
         }, {
            "name" : "NonAlcoholQuestionResponsePairs",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "QRP",
                  "expression" : {
                     "name" : "QuestionResponsePairs",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "And",
                  "operand" : [ {
                     "type" : "Not",
                     "operand" : {
                        "type" : "Equal",
                        "operand" : [ {
                           "type" : "PositionOf",
                           "pattern" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "nidaqs",
                              "type" : "Literal"
                           },
                           "string" : {
                              "path" : "id",
                              "scope" : "QRP",
                              "type" : "Property"
                           }
                        }, {
                           "type" : "Negate",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "1",
                              "type" : "Literal"
                           }
                        } ]
                     }
                  }, {
                     "type" : "Equal",
                     "operand" : [ {
                        "type" : "PositionOf",
                        "pattern" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "nidaqs-alcohol",
                           "type" : "Literal"
                        },
                        "string" : {
                           "path" : "id",
                           "scope" : "QRP",
                           "type" : "Property"
                        }
                     }, {
                        "type" : "Negate",
                        "operand" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "1",
                           "type" : "Literal"
                        }
                     } ]
                  } ]
               },
               "return" : {
                  "expression" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "question",
                        "value" : {
                           "path" : "question",
                           "scope" : "QRP",
                           "type" : "Property"
                        }
                     }, {
                        "name" : "answer",
                        "value" : {
                           "path" : "answer",
                           "scope" : "QRP",
                           "type" : "Property"
                        }
                     } ]
                  }
               }
            }
         }, {
            "name" : "AlcoholQuestionResponsePairs",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "QRP",
                  "expression" : {
                     "name" : "QuestionResponsePairs",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Or",
                  "operand" : [ {
                     "type" : "Equal",
                     "operand" : [ {
                        "type" : "PositionOf",
                        "pattern" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "nidaqs",
                           "type" : "Literal"
                        },
                        "string" : {
                           "path" : "id",
                           "scope" : "QRP",
                           "type" : "Property"
                        }
                     }, {
                        "type" : "Negate",
                        "operand" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "1",
                           "type" : "Literal"
                        }
                     } ]
                  }, {
                     "type" : "Not",
                     "operand" : {
                        "type" : "Equal",
                        "operand" : [ {
                           "type" : "PositionOf",
                           "pattern" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "nidaqs-alcohol",
                              "type" : "Literal"
                           },
                           "string" : {
                              "path" : "id",
                              "scope" : "QRP",
                              "type" : "Property"
                           }
                        }, {
                           "type" : "Negate",
                           "operand" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "1",
                              "type" : "Literal"
                           }
                        } ]
                     }
                  } ]
               },
               "return" : {
                  "expression" : {
                     "type" : "Tuple",
                     "element" : [ {
                        "name" : "question",
                        "value" : {
                           "path" : "question",
                           "scope" : "QRP",
                           "type" : "Property"
                        }
                     }, {
                        "name" : "answer",
                        "value" : {
                           "path" : "answer",
                           "scope" : "QRP",
                           "type" : "Property"
                        }
                     } ]
                  }
               }
            }
         }, {
            "name" : "DisplayNotification",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "And",
               "operand" : [ {
                  "name" : "IsIncluded",
                  "type" : "ExpressionRef"
               }, {
                  "type" : "Not",
                  "operand" : {
                     "name" : "Excluded",
                     "type" : "ExpressionRef"
                  }
               } ]
            }
         }, {
            "name" : "NotificationText",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "DisplayNotification",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "New screening results are available!",
                  "type" : "Literal"
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "AuditVariant",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "MostRecentQuestionnaireURL",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "http://www.cdc.gov/ncbddd/fasd/usaudit",
                           "type" : "Literal"
                        } ]
                     }, {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "MostRecentQuestionnaireURL",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "http://www.cdc.gov/ncbddd/fasd/nidaqs2usaudit",
                           "type" : "Literal"
                        } ]
                     } ]
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "USAUDIT",
                  "type" : "Literal"
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "MostRecentQuestionnaireURL",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "http://www.cdc.gov/ncbddd/fasd/audit",
                           "type" : "Literal"
                        } ]
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "AUDIT",
                     "type" : "Literal"
                  },
                  "else" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}String",
                     "type" : "As",
                     "operand" : {
                        "type" : "Null"
                     }
                  }
               }
            }
         }, {
            "name" : "ScoreBracketZoneOne",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "FemaleAtBirth",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "SexAtBirthUnknown",
                           "type" : "ExpressionRef"
                        } ]
                     }, {
                        "type" : "And",
                        "operand" : [ {
                           "name" : "MaleAtBirth",
                           "type" : "ExpressionRef"
                        }, {
                           "type" : "Greater",
                           "operand" : [ {
                              "precision" : "Year",
                              "type" : "CalculateAge",
                              "operand" : {
                                 "path" : "birthDate.value",
                                 "type" : "Property",
                                 "source" : {
                                    "name" : "Patient",
                                    "type" : "ExpressionRef"
                                 }
                              }
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "65",
                              "type" : "Literal"
                           } ]
                        } ]
                     } ]
                  }
               },
               "then" : {
                  "lowClosed" : true,
                  "highClosed" : true,
                  "type" : "Interval",
                  "low" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "0",
                     "type" : "Literal"
                  },
                  "high" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "6",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "lowClosed" : true,
                  "highClosed" : true,
                  "type" : "Interval",
                  "low" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "0",
                     "type" : "Literal"
                  },
                  "high" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "7",
                     "type" : "Literal"
                  }
               }
            }
         }, {
            "name" : "ScoreBracketZoneTwo",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "FemaleAtBirth",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "SexAtBirthUnknown",
                           "type" : "ExpressionRef"
                        } ]
                     }, {
                        "type" : "And",
                        "operand" : [ {
                           "name" : "MaleAtBirth",
                           "type" : "ExpressionRef"
                        }, {
                           "type" : "Greater",
                           "operand" : [ {
                              "precision" : "Year",
                              "type" : "CalculateAge",
                              "operand" : {
                                 "path" : "birthDate.value",
                                 "type" : "Property",
                                 "source" : {
                                    "name" : "Patient",
                                    "type" : "ExpressionRef"
                                 }
                              }
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "65",
                              "type" : "Literal"
                           } ]
                        } ]
                     } ]
                  }
               },
               "then" : {
                  "lowClosed" : true,
                  "highClosed" : true,
                  "type" : "Interval",
                  "low" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "7",
                     "type" : "Literal"
                  },
                  "high" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "15",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "lowClosed" : true,
                  "highClosed" : true,
                  "type" : "Interval",
                  "low" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "8",
                     "type" : "Literal"
                  },
                  "high" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "15",
                     "type" : "Literal"
                  }
               }
            }
         }, {
            "name" : "ScoreBracketZoneThree",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "name" : "AuditVariant",
                        "type" : "ExpressionRef"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "USAUDIT",
                        "type" : "Literal"
                     } ]
                  }
               },
               "then" : {
                  "lowClosed" : true,
                  "highClosed" : true,
                  "type" : "Interval",
                  "low" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "16",
                     "type" : "Literal"
                  },
                  "high" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "24",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "AuditVariant",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "AUDIT",
                           "type" : "Literal"
                        } ]
                     }
                  },
                  "then" : {
                     "lowClosed" : true,
                     "highClosed" : true,
                     "type" : "Interval",
                     "low" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                        "value" : "16",
                        "type" : "Literal"
                     },
                     "high" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                        "value" : "19",
                        "type" : "Literal"
                     }
                  },
                  "else" : {
                     "type" : "As",
                     "operand" : {
                        "type" : "Null"
                     },
                     "asTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "NamedTypeSpecifier"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "ScoreBracketZoneFour",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "name" : "AuditVariant",
                        "type" : "ExpressionRef"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "USAUDIT",
                        "type" : "Literal"
                     } ]
                  }
               },
               "then" : {
                  "lowClosed" : true,
                  "highClosed" : true,
                  "type" : "Interval",
                  "low" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "25",
                     "type" : "Literal"
                  },
                  "high" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "46",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "AuditVariant",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "AUDIT",
                           "type" : "Literal"
                        } ]
                     }
                  },
                  "then" : {
                     "lowClosed" : true,
                     "highClosed" : true,
                     "type" : "Interval",
                     "low" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                        "value" : "20",
                        "type" : "Literal"
                     },
                     "high" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                        "value" : "40",
                        "type" : "Literal"
                     }
                  },
                  "else" : {
                     "type" : "As",
                     "operand" : {
                        "type" : "Null"
                     },
                     "asTypeSpecifier" : {
                        "type" : "IntervalTypeSpecifier",
                        "pointType" : {
                           "name" : "{urn:hl7-org:elm-types:r1}Integer",
                           "type" : "NamedTypeSpecifier"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "MostRecentScreeningScore",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "HasRecentScoreFullUsAudit",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "type" : "ToInteger",
                  "operand" : {
                     "strict" : false,
                     "type" : "As",
                     "operand" : {
                        "name" : "RecentScoreFullUsAudit",
                        "type" : "ExpressionRef"
                     },
                     "asTypeSpecifier" : {
                        "name" : "{urn:hl7-org:elm-types:r1}String",
                        "type" : "NamedTypeSpecifier"
                     }
                  }
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "name" : "HasRecentScoreUsAuditC",
                        "type" : "ExpressionRef"
                     }
                  },
                  "then" : {
                     "type" : "ToInteger",
                     "operand" : {
                        "strict" : false,
                        "type" : "As",
                        "operand" : {
                           "name" : "RecentScoreUsAuditC",
                           "type" : "ExpressionRef"
                        },
                        "asTypeSpecifier" : {
                           "name" : "{urn:hl7-org:elm-types:r1}String",
                           "type" : "NamedTypeSpecifier"
                        }
                     }
                  },
                  "else" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "name" : "HasRecentScoreFullAudit",
                           "type" : "ExpressionRef"
                        }
                     },
                     "then" : {
                        "type" : "ToInteger",
                        "operand" : {
                           "strict" : false,
                           "type" : "As",
                           "operand" : {
                              "name" : "RecentScoreFullAudit",
                              "type" : "ExpressionRef"
                           },
                           "asTypeSpecifier" : {
                              "name" : "{urn:hl7-org:elm-types:r1}String",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     },
                     "else" : {
                        "type" : "If",
                        "condition" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "As",
                           "operand" : {
                              "name" : "HasRecentScoreAuditC",
                              "type" : "ExpressionRef"
                           }
                        },
                        "then" : {
                           "type" : "ToInteger",
                           "operand" : {
                              "strict" : false,
                              "type" : "As",
                              "operand" : {
                                 "name" : "RecentScoreAuditC",
                                 "type" : "ExpressionRef"
                              },
                              "asTypeSpecifier" : {
                                 "name" : "{urn:hl7-org:elm-types:r1}String",
                                 "type" : "NamedTypeSpecifier"
                              }
                           }
                        },
                        "else" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "0",
                           "type" : "Literal"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "IsZoneOneDrinker",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "In",
               "operand" : [ {
                  "name" : "MostRecentScreeningScore",
                  "type" : "ExpressionRef"
               }, {
                  "name" : "ScoreBracketZoneOne",
                  "type" : "ExpressionRef"
               } ]
            }
         }, {
            "name" : "IsZoneTwoDrinker",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "In",
               "operand" : [ {
                  "name" : "MostRecentScreeningScore",
                  "type" : "ExpressionRef"
               }, {
                  "name" : "ScoreBracketZoneTwo",
                  "type" : "ExpressionRef"
               } ]
            }
         }, {
            "name" : "IsZoneThreeDrinker",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "In",
               "operand" : [ {
                  "name" : "MostRecentScreeningScore",
                  "type" : "ExpressionRef"
               }, {
                  "name" : "ScoreBracketZoneThree",
                  "type" : "ExpressionRef"
               } ]
            }
         }, {
            "name" : "IsZoneFourDrinker",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "In",
               "operand" : [ {
                  "name" : "MostRecentScreeningScore",
                  "type" : "ExpressionRef"
               }, {
                  "name" : "ScoreBracketZoneFour",
                  "type" : "ExpressionRef"
               } ]
            }
         }, {
            "name" : "ZoneNumber",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "IsZoneOneDrinker",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                  "value" : "1",
                  "type" : "Literal"
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "name" : "IsZoneTwoDrinker",
                        "type" : "ExpressionRef"
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                     "value" : "2",
                     "type" : "Literal"
                  },
                  "else" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "name" : "IsZoneThreeDrinker",
                           "type" : "ExpressionRef"
                        }
                     },
                     "then" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                        "value" : "3",
                        "type" : "Literal"
                     },
                     "else" : {
                        "type" : "If",
                        "condition" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "As",
                           "operand" : {
                              "name" : "IsZoneFourDrinker",
                              "type" : "ExpressionRef"
                           }
                        },
                        "then" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "4",
                           "type" : "Literal"
                        },
                        "else" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                           "value" : "0",
                           "type" : "Literal"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "ZoneRomanNumeral",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "IsZoneOneDrinker",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "I",
                  "type" : "Literal"
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "name" : "IsZoneTwoDrinker",
                        "type" : "ExpressionRef"
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "II",
                     "type" : "Literal"
                  },
                  "else" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "name" : "IsZoneThreeDrinker",
                           "type" : "ExpressionRef"
                        }
                     },
                     "then" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "III",
                        "type" : "Literal"
                     },
                     "else" : {
                        "type" : "If",
                        "condition" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "As",
                           "operand" : {
                              "name" : "IsZoneFourDrinker",
                              "type" : "ExpressionRef"
                           }
                        },
                        "then" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "IV",
                           "type" : "Literal"
                        },
                        "else" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "",
                           "type" : "Literal"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "PregnantAndDrinking",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "And",
               "operand" : [ {
                  "name" : "DoesMeetPregnancyInclusionCriteria",
                  "type" : "ExpressionRef"
               }, {
                  "type" : "Not",
                  "operand" : {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "HasRecentNoApsResponse",
                           "type" : "ExpressionRef"
                        }, {
                           "type" : "And",
                           "operand" : [ {
                              "name" : "HasRecentYesApsResponse",
                              "type" : "ExpressionRef"
                           }, {
                              "type" : "Or",
                              "operand" : [ {
                                 "name" : "HasRecentNeverResponseUsauditQuestionOne",
                                 "type" : "ExpressionRef"
                              }, {
                                 "name" : "HasRecentNeverResponseAuditQuestionOne",
                                 "type" : "ExpressionRef"
                              } ]
                           } ]
                        } ]
                     }, {
                        "type" : "And",
                        "operand" : [ {
                           "type" : "Equal",
                           "operand" : [ {
                              "name" : "MostRecentScreeningScore",
                              "type" : "ExpressionRef"
                           }, {
                              "valueType" : "{urn:hl7-org:elm-types:r1}Integer",
                              "value" : "0",
                              "type" : "Literal"
                           } ]
                        }, {
                           "type" : "Not",
                           "operand" : {
                              "type" : "Exists",
                              "operand" : {
                                 "name" : "NonAlcoholQuestionResponsePairs",
                                 "type" : "ExpressionRef"
                              }
                           }
                        } ]
                     } ]
                  }
               } ]
            }
         }, {
            "name" : "PregnantAndNotDrinking",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "And",
               "operand" : [ {
                  "name" : "DoesMeetPregnancyInclusionCriteria",
                  "type" : "ExpressionRef"
               }, {
                  "type" : "Not",
                  "operand" : {
                     "name" : "PregnantAndDrinking",
                     "type" : "ExpressionRef"
                  }
               } ]
            }
         }, {
            "name" : "AlcoholScreeningResultsTextSummaryPartOne",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "PregnantAndNotDrinking",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "The patient indicates they do not drink alcohol\n",
                  "type" : "Literal"
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "name" : "PregnantAndDrinking",
                        "type" : "ExpressionRef"
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "The patient indicates they are drinking alcohol. There is NO known safe amount of alcohol use during pregnancy or while trying to become pregnant.<sup>*</sup>\n",
                     "type" : "Literal"
                  },
                  "else" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "name" : "IsZoneOneDrinker",
                           "type" : "ExpressionRef"
                        }
                     },
                     "then" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "The patients screening results indicate low risk drinking or abstinence. ",
                        "type" : "Literal"
                     },
                     "else" : {
                        "type" : "If",
                        "condition" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "As",
                           "operand" : {
                              "type" : "Or",
                              "operand" : [ {
                                 "type" : "Or",
                                 "operand" : [ {
                                    "name" : "IsZoneTwoDrinker",
                                    "type" : "ExpressionRef"
                                 }, {
                                    "name" : "IsZoneThreeDrinker",
                                    "type" : "ExpressionRef"
                                 } ]
                              }, {
                                 "name" : "IsZoneFourDrinker",
                                 "type" : "ExpressionRef"
                              } ]
                           }
                        },
                        "then" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "The patient indicates they are drinking alcohol. ",
                           "type" : "Literal"
                        },
                        "else" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "",
                           "type" : "Literal"
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "AlcoholScreeningResultsTextSummaryPartTwo",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "PregnantAndNotDrinking",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               },
               "else" : {
                  "type" : "Concatenate",
                  "operand" : [ {
                     "type" : "Concatenate",
                     "operand" : [ {
                        "type" : "Concatenate",
                        "operand" : [ {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "The patients screening score is ",
                           "type" : "Literal"
                        }, {
                           "type" : "ToString",
                           "operand" : {
                              "name" : "MostRecentScreeningScore",
                              "type" : "ExpressionRef"
                           }
                        } ]
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : ", and falls within Zone ",
                        "type" : "Literal"
                     } ]
                  }, {
                     "name" : "ZoneRomanNumeral",
                     "type" : "ExpressionRef"
                  } ]
               }
            }
         }, {
            "name" : "AlcoholScreeningResultsTextSummaryPartThree",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "PregnantAndNotDrinking",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "name" : "PregnantAndDrinking",
                        "type" : "ExpressionRef"
                     }
                  },
                  "then" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "name" : "IsZoneOneDrinker",
                           "type" : "ExpressionRef"
                        }
                     },
                     "then" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : ", which for NONPREGNANT individuals indicates low-risk drinking.\n",
                        "type" : "Literal"
                     },
                     "else" : {
                        "type" : "If",
                        "condition" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "As",
                           "operand" : {
                              "name" : "IsZoneTwoDrinker",
                              "type" : "ExpressionRef"
                           }
                        },
                        "then" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : ", which for NONPREGNANT individuals indicates drinking in excess of guidelines.",
                           "type" : "Literal"
                        },
                        "else" : {
                           "type" : "If",
                           "condition" : {
                              "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "As",
                              "operand" : {
                                 "name" : "IsZoneThreeDrinker",
                                 "type" : "ExpressionRef"
                              }
                           },
                           "then" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : ", which for NONPREGNANT individuals indicates harmful or hazardous drinking.",
                              "type" : "Literal"
                           },
                           "else" : {
                              "type" : "If",
                              "condition" : {
                                 "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                                 "type" : "As",
                                 "operand" : {
                                    "name" : "IsZoneFourDrinker",
                                    "type" : "ExpressionRef"
                                 }
                              },
                              "then" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                 "value" : ", which for NONPREGNANT individuals indicates high-risk drinking and probable alcohol dependence.",
                                 "type" : "Literal"
                              },
                              "else" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                 "value" : "",
                                 "type" : "Literal"
                              }
                           }
                        }
                     }
                  },
                  "else" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "name" : "IsZoneOneDrinker",
                           "type" : "ExpressionRef"
                        }
                     },
                     "then" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : ".\n",
                        "type" : "Literal"
                     },
                     "else" : {
                        "type" : "If",
                        "condition" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "As",
                           "operand" : {
                              "name" : "IsZoneTwoDrinker",
                              "type" : "ExpressionRef"
                           }
                        },
                        "then" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : ", indicating they are drinking in excess of guidelines.\n",
                           "type" : "Literal"
                        },
                        "else" : {
                           "type" : "If",
                           "condition" : {
                              "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "As",
                              "operand" : {
                                 "name" : "IsZoneThreeDrinker",
                                 "type" : "ExpressionRef"
                              }
                           },
                           "then" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : ", indicating harmful or hazardous drinking.\n",
                              "type" : "Literal"
                           },
                           "else" : {
                              "type" : "If",
                              "condition" : {
                                 "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                                 "type" : "As",
                                 "operand" : {
                                    "name" : "IsZoneFourDrinker",
                                    "type" : "ExpressionRef"
                                 }
                              },
                              "then" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                 "value" : ", indicating high-risk drinking and probable alcohol dependence.\n",
                                 "type" : "Literal"
                              },
                              "else" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                 "value" : "",
                                 "type" : "Literal"
                              }
                           }
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "AlcoholScreeningResultsTextSummaryPartFour",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "PregnantAndDrinking",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "\n<sup>*</sup> Centers for Disease Control and Prevention (CDC). CDCs Alcohol Screening and Brief Intervention Efforts. [https://www.cdc.gov/ncbddd/fasd/alcohol-screening.html](https://www.cdc.gov/ncbddd/fasd/alcohol-screening.html). Accessed February 18, 2020.",
                  "type" : "Literal"
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "AlcoholScreeningResultsTextSummary",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Concatenate",
               "operand" : [ {
                  "type" : "Concatenate",
                  "operand" : [ {
                     "type" : "Concatenate",
                     "operand" : [ {
                        "name" : "AlcoholScreeningResultsTextSummaryPartOne",
                        "type" : "ExpressionRef"
                     }, {
                        "name" : "AlcoholScreeningResultsTextSummaryPartTwo",
                        "type" : "ExpressionRef"
                     } ]
                  }, {
                     "name" : "AlcoholScreeningResultsTextSummaryPartThree",
                     "type" : "ExpressionRef"
                  } ]
               }, {
                  "name" : "AlcoholScreeningResultsTextSummaryPartFour",
                  "type" : "ExpressionRef"
               } ]
            }
         }, {
            "name" : "AlcoholScreeningResultsSummary",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "summary",
                  "value" : {
                     "name" : "AlcoholScreeningResultsTextSummary",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "score",
                  "value" : {
                     "name" : "MostRecentScreeningScore",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "zone",
                  "value" : {
                     "name" : "ZoneNumber",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "responses",
                  "value" : {
                     "name" : "AlcoholQuestionResponsePairs",
                     "type" : "ExpressionRef"
                  }
               } ]
            }
         }, {
            "name" : "AlcoholCounselingSuggestionText",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "DisplayNotification",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "name" : "PregnantAndNotDrinking",
                        "type" : "ExpressionRef"
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "For patients that are pregnant or trying to become pregnant whose screening response indicates they are not currently drinking alcohol, brief counseling interventions increase the likelihood that they will remain abstinent during pregnancy.<sup>1</sup> ACOG and several other organizations suggest the following talking points:<sup>2,3,4</sup>\n- Praise the patient for not drinking.\n- Emphasize the importance of continuing to not drink at any time during pregnancy, or while trying to become pregnant.\n- Reinforce to the patient that there is no known safe amount of alcohol use in pregnancy or while trying to become pregnant.\n  * Alcohol use during pregnancy can cause [birth defects](https://www.cdc.gov/ncbddd/birthdefects/index.html) and [developmental disabilities](https://www.cdc.gov/ncbddd/developmentaldisabilities/index.html), collectively known as [fetal alcohol spectrum disorders](https://www.cdc.gov/ncbddd/fasd/) (FASDs). FASDs are preventable if a developing baby is not exposed to alcohol before birth.\n  * Alcohol use during pregnancy is also linked to other outcomes, such as miscarriage, stillbirth, preterm (early) birth, and sudden infant death syndrome (SIDS).\n- Provide the patient with the patient education references listed below if additional information about drinking and pregnancy is requested by the patient, or if you feel it may be warranted.\n",
                     "type" : "Literal"
                  },
                  "else" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        }
                     },
                     "then" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "For patients that are pregnant or trying to become pregnant whose screening responses indicate they are currently drinking alcohol, ANY alcohol use is considered excessive. ACOG and several other organizations suggest the following talking points:<sup>1,2,4</sup>\n- Provide non-judgmental feedback and advice on ceasing alcohol use during pregnancy.\n- Emphasize that there is no known safe amount of alcohol a woman can consume during pregnancy, or while they are trying to become pregnant.\n  * Alcohol use during pregnancy can cause birth defects and developmental disabilities, collectively known as fetal alcohol spectrum disorders (FASDs). FASDs are preventable if a developing baby is not exposed to alcohol before birth.\n  * Alcohol use during pregnancy is also linked to other outcomes, such as miscarriage, stillbirth, preterm (early) birth, and sudden infant death syndrome (SIDS).\n * It is not safe to drink at any time during pregnancy, including the earliest stage of pregnancy before you may know you are pregnant.\n- Offer an appropriate follow-up visit with the patient.\n- Provide the patient with the patient education resources listed below if additional information about drinking and pregnancy is requested by the patient, or if you feel it may be warranted.\n\nIf you think the patient may be unable to reduce or eliminate their alcohol use, or may be dependent on alcohol, consider referring the patient for diagnostic evaluation and possible treatment of alcohol use disorder.<sup>3</sup>\n",
                        "type" : "Literal"
                     },
                     "else" : {
                        "type" : "If",
                        "condition" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "As",
                           "operand" : {
                              "name" : "IsZoneOneDrinker",
                              "type" : "ExpressionRef"
                           }
                        },
                        "then" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "For patients in Zone I, brief counseling can serve to reinforce low risk drinking, and could be effective if the patient underreported their drinking when responding to the screening questions, or might have had past problems with risky drinking.<sup>1</sup>\n- Acknowledge and praise the patients abstinence or low risk alcohol use.\n- Consider the patients responses to AUDIT questions #9 and #10, if present. Points scored on these two questions could indicate past problems with alcohol, and the patient may need to be advised to avoid alcohol.<sup>2, 3</sup>\n- If the patient is not abstinent, reinforce the following:\n  * What constitutes a standard drink in the United States (e.g., one 12 ounce can of beer, 5 ounces of table wine, or 1.5 ounces of 80-proof gin, vodka, whiskey, etc.)\n  * The recommended frequency and quantity of alcohol intake to stay within low risk guidelines:<sup>2</sup>\n    + Men up to and including age 65: no more than 4 drinks on any single day and no more than 14 drinks per week.\n    + Men ages 66 and older and all women: no more than 3 drinks on any single day and no more than 7 drinks per week.\n-\tProvide education regarding when the patient should avoid drinking alcohol, based on relevant patient factors:<sup>2</sup>\n  * Taking medications that interact with alcohol\n  * Having a medical condition made worse by drinking\n  * Being under the legal drinking age\n  * Planning to drive or operate machinery\n  *\tBeing pregnant or trying to become pregnant\n-\tProvide the patient with the patient education resources listed below.\n",
                           "type" : "Literal"
                        },
                        "else" : {
                           "type" : "If",
                           "condition" : {
                              "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "As",
                              "operand" : {
                                 "name" : "IsZoneTwoDrinker",
                                 "type" : "ExpressionRef"
                              }
                           },
                           "then" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "For patients in Zone II, a brief intervention using simple advice on the reduction of drinking, engaging the patient in reflective motivational conversations, and providing patient education materials may be the most appropriate course of action.<sup>1,2,3</sup>\n- Provide information to the patient on their screening results.\n- Reinforce the following information with the patient:\n  * What constitutes a standard drink in the United States (e.g., one 12 ounce can of beer, 5 ounces of table wine, or 1.5 ounces of 80-proof gin, vodka, whiskey, etc.)\n  * The recommended frequency and quantity of alcohol intake to stay within low risk guidelines:<sup>3</sup>\n    + Men up to and including age 65: no more than 4 drinks on any single day and no more than 14 drinks per week.\n    + All women and men ages 66 and older: no more than 3 drinks on any single day and no more than 7 drinks per week.- Discuss the patients responses to the AUDIT questions that may indicate particular concern:\n  * Responses to questions #4, #5, and #6 could indicate alcohol dependence symptoms, and responses to question #9 or #10 may indicate past problems with alcohol.<sup>3,4</sup>\n- Provide education regarding when the patient should avoid drinking alcohol, based on relevant patient factors:<sup>3</sup>\n  * Taking medications that interact with alcohol\n  * Having a medical condition made worse by drinking\n  * Being under the legal drinking age\n  * Planning to drive or operate machinery\n  * Being pregnant or trying to become pregnant\n- Provide the patient with the patient education resources listed below.\n",
                              "type" : "Literal"
                           },
                           "else" : {
                              "type" : "If",
                              "condition" : {
                                 "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                                 "type" : "As",
                                 "operand" : {
                                    "name" : "IsZoneThreeDrinker",
                                    "type" : "ExpressionRef"
                                 }
                              },
                              "then" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                 "value" : "For patients in Zone III, a combination of feedback, brief counseling, and continued monitoring may be effective, with further diagnostic evaluation indicated if the patient fails to respond or is suspected of alcohol dependence.<sup>1,2,3</sup>\n- Provide feedback to the patient on their screening results.\n- Reinforce the following information with the patient:\n  * What constitutes a standard drink in the United States (e.g., one 12 ounce can of beer, 5 ounces of table wine, or 1.5 ounces of 80-proof gin, vodka, whiskey, etc.)\n  * The recommended frequency and quantity of alcohol intake to stay within low risk guidelines:<sup>3</sup>\n    + Men up to age 65: no more than 4 drinks on any single day and no more than 14 drinks per week.\n    + Women and men ages 66 and older: no more than 3 drinks on any single day and no more than 7 drinks per week.\n- Discuss the patients responses to any screening questions that may indicate particular concern:\n  * Responses to questions #4, #5, and #6 could indicate dependence symptoms, and responses to questions #9 or #10 may indicate past problems with alcohol.<sup>3,4</sup>\n- Provide education regarding when you should avoid drinking alcohol, based on relevant patient factors:<sup>3</sup>\n  * Taking medications that interact with alcohol\n  * Having a medical condition made worse by drinking\n  * Being under the legal drinking age\n  * Planning to drive or operate machinery\n  * Being pregnant or trying to become pregnant\n- Offer an appropriate follow-up visit with the patient.\n- Provide the patient with the patient education resources listed below.\n\nIf you think the patient may be dependent on alcohol, consider referring the patient for diagnostic evaluation and possible treatment of alcohol use disorder.",
                                 "type" : "Literal"
                              },
                              "else" : {
                                 "type" : "If",
                                 "condition" : {
                                    "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                                    "type" : "As",
                                    "operand" : {
                                       "name" : "IsZoneFourDrinker",
                                       "type" : "ExpressionRef"
                                    }
                                 },
                                 "then" : {
                                    "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                    "value" : "Patients in Zone IV, which suggests alcohol dependence, should be referred to a specialist for diagnostic evaluation and possible treatment.<sup>1,2,3</sup>\n- Provide feedback to the patient on their screening results, including the following:\n  * The patients level of drinking far exceeds safe guidelines, and specific problems related to drinking are already present\n  * The patient has signs of alcohol dependence\n- Discuss the need for referral to a specialist for diagnostic evaluation and possible treatment of alcohol use disorder with the patient, and encourage the patient to see the specialist.\n- Offer an appropriate follow-up visit with the patient.\n- Provide the patient with the patient education resources listed below.\n",
                                    "type" : "Literal"
                                 },
                                 "else" : {
                                    "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                    "value" : "",
                                    "type" : "Literal"
                                 }
                              }
                           }
                        }
                     }
                  }
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "AdditionalBriefInterventionConsiderations",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "List",
               "element" : [ {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "name" : "PregnantAndDrinking",
                        "type" : "ExpressionRef"
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "Additional guidance on the important components of conducting a brief intervention:\n- Raise the subject\n- Provide feedback about screening results\n- Ask patients what they like and what they dont like about their drinking (in that order)\n- Ask if they would like your medical advice\n- Listen for change talk to assess how ready the patient is to modify his or her behavior\n- Provide options the patient can choose from to develop a plan\n- Seek agreement for a followup visit\n- Thank patient\n",
                     "type" : "Literal"
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "",
                     "type" : "Literal"
                  }
               } ]
            }
         }, {
            "name" : "AlcoholCounselingSuggestionReferences",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "DisplayNotification",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "PregnantAndNotDrinking",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        } ]
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "1. Curry SJ, Krist AH, Owens DK, et al. Screening and Behavioral Counseling Interventions to Reduce Unhealthy Alcohol Use in Adolescents and Adults: US Preventive Services Task Force Recommendation Statement. JAMA - J Am Med Assoc. 2018;320(18):1899-1909. doi:10.1001/jama.2018.16789\n2. The American College of Obstetricians and Gynecologists. At-Risk Drinking and Alcohol Dependence: Obstetric and Gynecologic Implications - ACOG. Committee on Health Care for Underserved Women. [https://www.acog.org/Clinical-Guidance-and-Publications/Committee-Opinions/Committee-on-Health-Care-for-Underserved-Women/At-Risk-Drinking-and-Alcohol-Dependence-Obstetric-and-Gynecologic-Implications](https://www.acog.org/Clinical-Guidance-and-Publications/Committee-Opinions/Committee-on-Health-Care-for-Underserved-Women/At-Risk-Drinking-and-Alcohol-Dependence-Obstetric-and-Gynecologic-Implications). Published 2011. Accessed January 21, 2020.\n3. World Health Organization. Guidelines for the Identification and Management of Substance Use and Substance Use Disorders in Pregnancy. Vol 34.; 2014. [http://www.ncbi.nlm.nih.gov/pubmed/24783312](http://www.ncbi.nlm.nih.gov/pubmed/24783312). Accessed October 2, 2019.\n4. Centers for Disease Control and Prevention (CDC). CDCs Alcohol Screening and Brief Intervention Efforts. [https://www.cdc.gov/ncbddd/fasd/alcohol-screening.html](https://www.cdc.gov/ncbddd/fasd/alcohol-screening.html). Accessed February 18, 2020.\n",
                     "type" : "Literal"
                  },
                  "else" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "name" : "IsZoneOneDrinker",
                           "type" : "ExpressionRef"
                        }
                     },
                     "then" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "1. Babor TF, Higgins-Biddle JC. Brief Intervention for Hazardous and Harmful Drinking: A Manual for Use in Primary Care.; 2001. [https://apps.who.int/iris/bitstream/handle/10665/67210/WHO_MSD_MSB_01.6b.pdf?sequence=1](https://apps.who.int/iris/bitstream/handle/10665/67210/WHO_MSD_MSB_01.6b.pdf?sequence=1)\n2. Babor TF, Higgins-Biddle JC, Robaina K. The Alcohol Use Disorders Identification Test, Adapted for Use in the United States: A Guide for Primary Care Practitioners.; 2017. [https://www.dshs.wa.gov/sites/default/files/BHSIA/dbh/wasbirt/USAUDIT-Guide_2016.pdf](https://www.dshs.wa.gov/sites/default/files/BHSIA/dbh/wasbirt/USAUDIT-Guide_2016.pdf)\n3. Babor TF, Higgins-Biddle JC, Saunders JB, Monteiro MG. The Alcohol Use Disorders Identification Test: Guidelines for Use in Primary Care.; 2001. [https://www.who.int/substance_abuse/publications/audit/en/](https://www.who.int/substance_abuse/publications/audit/en/). Accessed October 10, 2019.\n",
                        "type" : "Literal"
                     },
                     "else" : {
                        "type" : "If",
                        "condition" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "As",
                           "operand" : {
                              "name" : "IsZoneTwoDrinker",
                              "type" : "ExpressionRef"
                           }
                        },
                        "then" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "1. Babor TF, Higgins-Biddle JC. Brief Intervention for Hazardous and Harmful Drinking: A Manual for Use in Primary Care.; 2001. [https://apps.who.int/iris/bitstream/handle/10665/67210/WHO_MSD_MSB_01.6b.pdf?sequence=1](https://apps.who.int/iris/bitstream/handle/10665/67210/WHO_MSD_MSB_01.6b.pdf?sequence=1)\n2. Higgins-Biddle JC, Hungerford DW, Baker SD, et al. Planning and Implementing Screening and Brief Intervention for Risky Alcohol Use A Step-by-Step Guide for Primary Care Practices. Centers Dis Control Prev Natl Cent Birth Defects Dev Disabil. 2014.\n3. Babor TF, Higgins-Biddle JC, Robaina K. The Alcohol Use Disorders Identification Test, Adapted for Use in the United States: A Guide for Primary Care Practitioners.; 2017. [https://www.dshs.wa.gov/sites/default/files/BHSIA/dbh/wasbirt/USAUDIT-Guide_2016.pdf](https://www.dshs.wa.gov/sites/default/files/BHSIA/dbh/wasbirt/USAUDIT-Guide_2016.pdf)\n4. Babor TF, Higgins-Biddle JC, Saunders JB, Monteiro MG. The Alcohol Use Disorders Identification Test: Guidelines for Use in Primary Care.; 2001. [https://www.who.int/substance_abuse/publications/audit/en/](https://www.who.int/substance_abuse/publications/audit/en/). Accessed October 10, 2019.\n",
                           "type" : "Literal"
                        },
                        "else" : {
                           "type" : "If",
                           "condition" : {
                              "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "As",
                              "operand" : {
                                 "name" : "IsZoneThreeDrinker",
                                 "type" : "ExpressionRef"
                              }
                           },
                           "then" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "1. Babor TF, Higgins-Biddle JC. Brief Intervention for Hazardous and Harmful Drinking: A Manual for Use in Primary Care.; 2001. [https://apps.who.int/iris/bitstream/handle/10665/67210/WHO_MSD_MSB_01.6b.pdf?sequence=1](https://apps.who.int/iris/bitstream/handle/10665/67210/WHO_MSD_MSB_01.6b.pdf?sequence=1)\n2. Higgins-Biddle JC, Hungerford DW, Baker SD, et al. Planning and Implementing Screening and Brief Intervention for Risky Alcohol Use A Step-by-Step Guide for Primary Care Practices. Centers Dis Control Prev Natl Cent Birth Defects Dev Disabil. 2014.\n3. Babor TF, Higgins-Biddle JC, Robaina K. The Alcohol Use Disorders Identification Test, Adapted for Use in the United States: A Guide for Primary Care Practitioners.; 2017. [https://www.dshs.wa.gov/sites/default/files/BHSIA/dbh/wasbirt/USAUDIT-Guide_2016.pdf](https://www.dshs.wa.gov/sites/default/files/BHSIA/dbh/wasbirt/USAUDIT-Guide_2016.pdf)\n4. Babor TF, Higgins-Biddle JC, Saunders JB, Monteiro MG. The Alcohol Use Disorders Identification Test: Guidelines for Use in Primary Care.; 2001. [https://www.who.int/substance_abuse/publications/audit/en/](https://www.who.int/substance_abuse/publications/audit/en/). Accessed October 10, 2019.\n",
                              "type" : "Literal"
                           },
                           "else" : {
                              "type" : "If",
                              "condition" : {
                                 "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                                 "type" : "As",
                                 "operand" : {
                                    "name" : "IsZoneFourDrinker",
                                    "type" : "ExpressionRef"
                                 }
                              },
                              "then" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                 "value" : "1. Babor TF, Higgins-Biddle JC. Brief Intervention for Hazardous and Harmful Drinking: A Manual for Use in Primary Care.; 2001. [https://apps.who.int/iris/bitstream/handle/10665/67210/WHO_MSD_MSB_01.6b.pdf?sequence=1](https://apps.who.int/iris/bitstream/handle/10665/67210/WHO_MSD_MSB_01.6b.pdf?sequence=1)\n2. Higgins-Biddle JC, Hungerford DW, Baker SD, et al. Planning and Implementing Screening and Brief Intervention for Risky Alcohol Use A Step-by-Step Guide for Primary Care Practices. Centers Dis Control Prev Natl Cent Birth Defects Dev Disabil. 2014.\n3. Babor TF, Higgins-Biddle JC, Robaina K. The Alcohol Use Disorders Identification Test, Adapted for Use in the United States: A Guide for Primary Care Practitioners.; 2017. [https://www.dshs.wa.gov/sites/default/files/BHSIA/dbh/wasbirt/USAUDIT-Guide_2016.pdf](https://www.dshs.wa.gov/sites/default/files/BHSIA/dbh/wasbirt/USAUDIT-Guide_2016.pdf)\n",
                                 "type" : "Literal"
                              },
                              "else" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                 "value" : "",
                                 "type" : "Literal"
                              }
                           }
                        }
                     }
                  }
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "AlcoholTreatmentReferralSuggested",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "And",
                     "operand" : [ {
                        "name" : "DisplayNotification",
                        "type" : "ExpressionRef"
                     }, {
                        "type" : "Or",
                        "operand" : [ {
                           "type" : "Or",
                           "operand" : [ {
                              "name" : "IsZoneThreeDrinker",
                              "type" : "ExpressionRef"
                           }, {
                              "name" : "IsZoneFourDrinker",
                              "type" : "ExpressionRef"
                           } ]
                        }, {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        } ]
                     } ]
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "value" : "true",
                  "type" : "Literal"
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "value" : "false",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "AlcoholCounselingSuggestions",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "suggestions",
                  "value" : {
                     "name" : "AlcoholCounselingSuggestionText",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "additional",
                  "value" : {
                     "name" : "AdditionalBriefInterventionConsiderations",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "references",
                  "value" : {
                     "name" : "AlcoholCounselingSuggestionReferences",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "referral",
                  "value" : {
                     "name" : "AlcoholTreatmentReferralSuggested",
                     "type" : "ExpressionRef"
                  }
               } ]
            }
         }, {
            "name" : "AlcoholPatientEducationResources",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "DisplayNotification",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "name" : "PregnantAndNotDrinking",
                        "type" : "ExpressionRef"
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "- Find out more about Alcohol Use in Pregnancy: [https://www.cdc.gov/ncbddd/fasd/alcohol-use.html](https://www.cdc.gov/ncbddd/fasd/alcohol-use.html)\n- Fact Sheet on Fetal Alcohol Spectrum Disorders (FASDS): [https://www.cdc.gov/ncbddd/fasd/documents/fasd_english-508.pdf](https://www.cdc.gov/ncbddd/fasd/documents/fasd_english-508.pdf)\n- An Alcohol-Free Pregnancy is the Best Choice for Your Baby (brochure): [https://www.cdc.gov/ncbddd/fasd/documents/FASDBrochure_final-508.pdf](https://www.cdc.gov/ncbddd/fasd/documents/FASDBrochure_final-508.pdf)\n",
                     "type" : "Literal"
                  },
                  "else" : {
                     "type" : "If",
                     "condition" : {
                        "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                        "type" : "As",
                        "operand" : {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        }
                     },
                     "then" : {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "- 5 Things You Should Know About Drinking Alcohol During Pregnancy: [https://www.cdc.gov/ncbddd/fasd/women.html](https://www.cdc.gov/ncbddd/fasd/women.html)\n- Alcohol Use in Pregnancy: [https://www.cdc.gov/ncbddd/fasd/alcohol-use.html](https://www.cdc.gov/ncbddd/fasd/alcohol-use.html)\n- Fact Sheet on Fetal Alcohol Spectrum Disorders (FASDS): [https://www.cdc.gov/ncbddd/fasd/documents/fasd_english-508.pdf](https://www.cdc.gov/ncbddd/fasd/documents/fasd_english-508.pdf)\n- An Alcohol-Free Pregnancy is the Best Choice for Your Baby (brochure): [https://www.cdc.gov/ncbddd/fasd/factsheets.html](https://www.cdc.gov/ncbddd/fasd/factsheets.html)\n",
                        "type" : "Literal"
                     },
                     "else" : {
                        "type" : "If",
                        "condition" : {
                           "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                           "type" : "As",
                           "operand" : {
                              "name" : "IsZoneOneDrinker",
                              "type" : "ExpressionRef"
                           }
                        },
                        "then" : {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "- What Is A Standard Drink?: [https://www.niaaa.nih.gov/what-standard-drink](https://www.niaaa.nih.gov/what-standard-drink)\n- Alcohol Use And Your Health: [https://www.cdc.gov/alcohol/fact-sheets/alcohol-use.htm](https://www.cdc.gov/alcohol/fact-sheets/alcohol-use.htm)\n",
                           "type" : "Literal"
                        },
                        "else" : {
                           "type" : "If",
                           "condition" : {
                              "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                              "type" : "As",
                              "operand" : {
                                 "name" : "IsZoneTwoDrinker",
                                 "type" : "ExpressionRef"
                              }
                           },
                           "then" : {
                              "valueType" : "{urn:hl7-org:elm-types:r1}String",
                              "value" : "- Rethinking Drinking: Alcohol & Your Health: [https://www.rethinkingdrinking.niaaa.nih.gov/](https://www.rethinkingdrinking.niaaa.nih.gov/)\n- Alcohol Use And Your Health: [https://www.cdc.gov/alcohol/fact-sheets/alcohol-use.htm](https://www.cdc.gov/alcohol/fact-sheets/alcohol-use.htm)\n",
                              "type" : "Literal"
                           },
                           "else" : {
                              "type" : "If",
                              "condition" : {
                                 "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                                 "type" : "As",
                                 "operand" : {
                                    "name" : "IsZoneThreeDrinker",
                                    "type" : "ExpressionRef"
                                 }
                              },
                              "then" : {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                 "value" : "- Rethinking Drinking: Alcohol & Your Health: [https://www.rethinkingdrinking.niaaa.nih.gov/](https://www.rethinkingdrinking.niaaa.nih.gov/)\n- Alcohol Use And Your Health: [https://www.cdc.gov/alcohol/fact-sheets/alcohol-use.htm](https://www.cdc.gov/alcohol/fact-sheets/alcohol-use.htm)\n- Find Your Way to Alcohol Treatment (NIAAA Alcohol Treatment Navigator): [https://alcoholtreatment.niaaa.nih.gov/](https://alcoholtreatment.niaaa.nih.gov/)\n- Find Treatment for Substance Use Disorder: [https://findtreatment.gov/](https://findtreatment.gov/)\n",
                                 "type" : "Literal"
                              },
                              "else" : {
                                 "type" : "If",
                                 "condition" : {
                                    "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                                    "type" : "As",
                                    "operand" : {
                                       "name" : "IsZoneFourDrinker",
                                       "type" : "ExpressionRef"
                                    }
                                 },
                                 "then" : {
                                    "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                    "value" : "- Treatment for Alcohol Problems: Finding and Getting Help: [https://www.niaaa.nih.gov/publications/brochures-and-fact-sheets/treatment-alcohol-problems-finding-and-getting-help](https://www.niaaa.nih.gov/publications/brochures-and-fact-sheets/treatment-alcohol-problems-finding-and-getting-help)\n- NIAAA Alcohol Treatment Navigator: [https://alcoholtreatment.niaaa.nih.gov/](https://alcoholtreatment.niaaa.nih.gov/)\n- Find Treatment for Substance Use Disorder: [https://findtreatment.gov/](https://findtreatment.gov/)\n",
                                    "type" : "Literal"
                                 },
                                 "else" : {
                                    "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                    "value" : "",
                                    "type" : "Literal"
                                 }
                              }
                           }
                        }
                     }
                  }
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "NidaQsWasPerformed",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "name" : "MostRecentQuestionnaireURL",
                        "type" : "ExpressionRef"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "http://www.cdc.gov/ncbddd/fasd/nidaqs2usaudit",
                        "type" : "Literal"
                     } ]
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "value" : "true",
                  "type" : "Literal"
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "value" : "false",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "RecentNidaTobaccoResponse",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "RV",
                  "expression" : {
                     "name" : "MostRecentResponseValues",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Equal",
                  "operand" : [ {
                     "path" : "id",
                     "scope" : "RV",
                     "type" : "Property"
                  }, {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "nidaqs-tobacco-question",
                     "type" : "Literal"
                  } ]
               },
               "return" : {
                  "expression" : {
                     "type" : "SingletonFrom",
                     "operand" : {
                        "type" : "ToList",
                        "operand" : {
                           "strict" : false,
                           "type" : "As",
                           "operand" : {
                              "path" : "answer",
                              "scope" : "RV",
                              "type" : "Property"
                           },
                           "asTypeSpecifier" : {
                              "name" : "{http://hl7.org/fhir}Coding",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "RecentNidaRxDrugResponse",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "RV",
                  "expression" : {
                     "name" : "MostRecentResponseValues",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Equal",
                  "operand" : [ {
                     "path" : "id",
                     "scope" : "RV",
                     "type" : "Property"
                  }, {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "nidaqs-rx-drug-question",
                     "type" : "Literal"
                  } ]
               },
               "return" : {
                  "expression" : {
                     "type" : "SingletonFrom",
                     "operand" : {
                        "type" : "ToList",
                        "operand" : {
                           "strict" : false,
                           "type" : "As",
                           "operand" : {
                              "path" : "answer",
                              "scope" : "RV",
                              "type" : "Property"
                           },
                           "asTypeSpecifier" : {
                              "name" : "{http://hl7.org/fhir}Coding",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "RecentNidaIllegalDrugResponse",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Query",
               "source" : [ {
                  "alias" : "RV",
                  "expression" : {
                     "name" : "MostRecentResponseValues",
                     "type" : "ExpressionRef"
                  }
               } ],
               "relationship" : [ ],
               "where" : {
                  "type" : "Equal",
                  "operand" : [ {
                     "path" : "id",
                     "scope" : "RV",
                     "type" : "Property"
                  }, {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "nidaqs-illegal-drug-question",
                     "type" : "Literal"
                  } ]
               },
               "return" : {
                  "expression" : {
                     "type" : "SingletonFrom",
                     "operand" : {
                        "type" : "ToList",
                        "operand" : {
                           "strict" : false,
                           "type" : "As",
                           "operand" : {
                              "path" : "answer",
                              "scope" : "RV",
                              "type" : "Property"
                           },
                           "asTypeSpecifier" : {
                              "name" : "{http://hl7.org/fhir}Coding",
                              "type" : "NamedTypeSpecifier"
                           }
                        }
                     }
                  }
               }
            }
         }, {
            "name" : "TobaccoDidDidNot",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equivalent",
                     "operand" : [ {
                        "name" : "ToCode",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "type" : "SingletonFrom",
                           "operand" : {
                              "name" : "RecentNidaTobaccoResponse",
                              "type" : "ExpressionRef"
                           }
                        } ]
                     }, {
                        "name" : "Never",
                        "type" : "CodeRef"
                     } ]
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "did not use",
                  "type" : "Literal"
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "In",
                        "operand" : [ {
                           "name" : "ToCode",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "type" : "SingletonFrom",
                              "operand" : {
                                 "name" : "RecentNidaTobaccoResponse",
                                 "type" : "ExpressionRef"
                              }
                           } ]
                        }, {
                           "type" : "List",
                           "element" : [ {
                              "name" : "Once or twice",
                              "type" : "CodeRef"
                           }, {
                              "name" : "Monthly",
                              "type" : "CodeRef"
                           }, {
                              "name" : "Weekly",
                              "type" : "CodeRef"
                           }, {
                              "name" : "Daily or Almost Daily",
                              "type" : "CodeRef"
                           } ]
                        } ]
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "used",
                     "type" : "Literal"
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "",
                     "type" : "Literal"
                  }
               }
            }
         }, {
            "name" : "RxDrugDidDidNot",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equivalent",
                     "operand" : [ {
                        "name" : "ToCode",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "type" : "SingletonFrom",
                           "operand" : {
                              "name" : "RecentNidaRxDrugResponse",
                              "type" : "ExpressionRef"
                           }
                        } ]
                     }, {
                        "name" : "Never",
                        "type" : "CodeRef"
                     } ]
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "did not use",
                  "type" : "Literal"
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "In",
                        "operand" : [ {
                           "name" : "ToCode",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "type" : "SingletonFrom",
                              "operand" : {
                                 "name" : "RecentNidaRxDrugResponse",
                                 "type" : "ExpressionRef"
                              }
                           } ]
                        }, {
                           "type" : "List",
                           "element" : [ {
                              "name" : "Once or twice",
                              "type" : "CodeRef"
                           }, {
                              "name" : "Monthly",
                              "type" : "CodeRef"
                           }, {
                              "name" : "Weekly",
                              "type" : "CodeRef"
                           }, {
                              "name" : "Daily or Almost Daily",
                              "type" : "CodeRef"
                           } ]
                        } ]
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "used",
                     "type" : "Literal"
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "",
                     "type" : "Literal"
                  }
               }
            }
         }, {
            "name" : "IllegalDrugDidDidNot",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equivalent",
                     "operand" : [ {
                        "name" : "ToCode",
                        "libraryName" : "FHIRHelpers",
                        "type" : "FunctionRef",
                        "operand" : [ {
                           "type" : "SingletonFrom",
                           "operand" : {
                              "name" : "RecentNidaIllegalDrugResponse",
                              "type" : "ExpressionRef"
                           }
                        } ]
                     }, {
                        "name" : "Never",
                        "type" : "CodeRef"
                     } ]
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "did not use",
                  "type" : "Literal"
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "In",
                        "operand" : [ {
                           "name" : "ToCode",
                           "libraryName" : "FHIRHelpers",
                           "type" : "FunctionRef",
                           "operand" : [ {
                              "type" : "SingletonFrom",
                              "operand" : {
                                 "name" : "RecentNidaIllegalDrugResponse",
                                 "type" : "ExpressionRef"
                              }
                           } ]
                        }, {
                           "type" : "List",
                           "element" : [ {
                              "name" : "Once or twice",
                              "type" : "CodeRef"
                           }, {
                              "name" : "Monthly",
                              "type" : "CodeRef"
                           }, {
                              "name" : "Weekly",
                              "type" : "CodeRef"
                           }, {
                              "name" : "Daily or Almost Daily",
                              "type" : "CodeRef"
                           } ]
                        } ]
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "used",
                     "type" : "Literal"
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "",
                     "type" : "Literal"
                  }
               }
            }
         }, {
            "name" : "NonAlcoholScreeningResultsTextSummary",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "NidaQsWasPerformed",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "type" : "Concatenate",
                  "operand" : [ {
                     "type" : "Concatenate",
                     "operand" : [ {
                        "type" : "Concatenate",
                        "operand" : [ {
                           "type" : "Concatenate",
                           "operand" : [ {
                              "type" : "Concatenate",
                              "operand" : [ {
                                 "type" : "Concatenate",
                                 "operand" : [ {
                                    "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                    "value" : "The patient indicates that in the past year, they ",
                                    "type" : "Literal"
                                 }, {
                                    "name" : "TobaccoDidDidNot",
                                    "type" : "ExpressionRef"
                                 } ]
                              }, {
                                 "valueType" : "{urn:hl7-org:elm-types:r1}String",
                                 "value" : " tobacco products; they ",
                                 "type" : "Literal"
                              } ]
                           }, {
                              "name" : "RxDrugDidDidNot",
                              "type" : "ExpressionRef"
                           } ]
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : " prescription drugs for nonmedical reasons; and that they ",
                           "type" : "Literal"
                        } ]
                     }, {
                        "name" : "IllegalDrugDidDidNot",
                        "type" : "ExpressionRef"
                     } ]
                  }, {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : " illegal drugs.",
                     "type" : "Literal"
                  } ]
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "NonAlcoholScreeningResultsSummary",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "summary",
                  "value" : {
                     "name" : "NonAlcoholScreeningResultsTextSummary",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "responses",
                  "value" : {
                     "name" : "NonAlcoholQuestionResponsePairs",
                     "type" : "ExpressionRef"
                  }
               } ]
            }
         }, {
            "name" : "TobaccoCounselingSuggestionText",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "name" : "TobaccoDidDidNot",
                        "type" : "ExpressionRef"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "used",
                        "type" : "Literal"
                     } ]
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "PregnantAndNotDrinking",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        } ]
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "- If the patient is using tobacco products, consider providing them with the following information:<sup>2,3</sup>\n  * Smoking during pregnancy increases the risk of health problems for developing babies, including preterm birth, low birth weight and birth defects of the mouth and lips. Smoking during pregnancy can also increase the risk of sudden infant death syndrome.\n  * Quitting smoking is an important way to protect both your own health and the health of your baby\n- Consider providing the patient with the patient education resources listed below\n",
                     "type" : "Literal"
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "- If the patient is using tobacco products, advise them to quit:<sup>2</sup>\n  * If the patient seems willing to quit, provide appropriate interventions to assist them.\n- Consider providing the patient with the patient education resources listed below.\n",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "TobaccoCounselingSuggestionReferences",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "name" : "TobaccoDidDidNot",
                        "type" : "ExpressionRef"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "used",
                        "type" : "Literal"
                     } ]
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "PregnantAndNotDrinking",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        } ]
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "2. Centers for Disease Control and Prevention (CDC). Substance Use During Pregnancy | CDC. [https://www.cdc.gov/reproductivehealth/maternalinfanthealth/substance-abuse/substance-abuse-during-pregnancy.htm](https://www.cdc.gov/reproductivehealth/maternalinfanthealth/substance-abuse/substance-abuse-during-pregnancy.htm). Published 2019. Accessed March 11, 2020.\n3. The American College of Obstetricians and Gynecologists. Smoking Cessation During Pregnancy - ACOG. [https://www.acog.org/Clinical-Guidance-and-Publications/Committee-Opinions/Committee-on-Obstetric-Practice/Smoking-Cessation-During-Pregnancy?IsMobileSet=false](https://www.acog.org/Clinical-Guidance-and-Publications/Committee-Opinions/Committee-on-Obstetric-Practice/Smoking-Cessation-During-Pregnancy?IsMobileSet=false). Published 2017. Accessed March 11, 2020.\n",
                     "type" : "Literal"
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "2. Agency for Healthcare Research and Quality. Treating Tobacco Use and Dependence. [https://www.ahrq.gov/prevention/guidelines/tobacco/clinicians/references/quickref/index.html](https://www.ahrq.gov/prevention/guidelines/tobacco/clinicians/references/quickref/index.html). Accessed March 14, 2020.\n",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "DrugCounselingReferenceNumber",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "name" : "TobaccoDidDidNot",
                        "type" : "ExpressionRef"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "used",
                        "type" : "Literal"
                     } ]
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "4",
                  "type" : "Literal"
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "3",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "DrugCounselingSuggestionText",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "RxDrugDidDidNot",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "used",
                           "type" : "Literal"
                        } ]
                     }, {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "IllegalDrugDidDidNot",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "used",
                           "type" : "Literal"
                        } ]
                     } ]
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "PregnantAndNotDrinking",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        } ]
                     }
                  },
                  "then" : {
                     "type" : "Concatenate",
                     "operand" : [ {
                        "type" : "Concatenate",
                        "operand" : [ {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "- If the patient is using illegal drugs or prescription drugs for nonmedical reasons, and agrees to discuss the screening results, consider providing the patient with the following information: <sup>2,",
                           "type" : "Literal"
                        }, {
                           "name" : "DrugCounselingReferenceNumber",
                           "type" : "ExpressionRef"
                        } ]
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "</sup>\n  * Substance use, and in particular, use of opioid pain medications during pregnancy, is linked to several serious health impacts for you and your baby (e.g., preterm birth, stillbirth, maternal mortality).\n  * Marijuana use is also linked to health concerns, and should be discouraged during pregnancy.\n- Consider referring the patient for further evaluation and treatment of their substance use.\n- Consider providing the patient with the patient education resources listed below\n",
                        "type" : "Literal"
                     } ]
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "- If the patient is using illegal drugs or prescription drugs for nonmedical reasons and agrees to discuss the screening results, consider doing additional screening or information gathering to determine the extent of the patients drug use.\n- Provide medical advice specific to the patients drug use.\n- Consider referring the patient for further evaluation and treatment of their substance use.\n- Consider providing the patient with the patient education resources listed below.\n",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "DrugCounselingSuggestionReferences",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "name" : "TobaccoDidDidNot",
                        "type" : "ExpressionRef"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "used",
                        "type" : "Literal"
                     } ]
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "PregnantAndNotDrinking",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        } ]
                     }
                  },
                  "then" : {
                     "type" : "Concatenate",
                     "operand" : [ {
                        "name" : "DrugCounselingReferenceNumber",
                        "type" : "ExpressionRef"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : ". The American College of Obstetricians and Gynecologists. Marijuana Use During Pregnancy and Lactation - ACOG. [https://www.acog.org/Clinical-Guidance-and-Publications/Committee-Opinions/Committee-on-Obstetric-Practice/Marijuana-Use-During-Pregnancy-and-Lactation](https://www.acog.org/Clinical-Guidance-and-Publications/Committee-Opinions/Committee-on-Obstetric-Practice/Marijuana-Use-During-Pregnancy-and-Lactation). Published 2019. Accessed March 12, 2020.\n",
                        "type" : "Literal"
                     } ]
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "PregnantAndNotDrinking",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        } ]
                     }
                  },
                  "then" : {
                     "type" : "Concatenate",
                     "operand" : [ {
                        "type" : "Concatenate",
                        "operand" : [ {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "2. Centers for Disease Control and Prevention (CDC). Substance Use During Pregnancy | CDC. [https://www.cdc.gov/reproductivehealth/maternalinfanthealth/substance-abuse/substance-abuse-during-pregnancy.htm](https://www.cdc.gov/reproductivehealth/maternalinfanthealth/substance-abuse/substance-abuse-during-pregnancy.htm). Published 2019. Accessed March 11, 2020.\n",
                           "type" : "Literal"
                        }, {
                           "name" : "DrugCounselingReferenceNumber",
                           "type" : "ExpressionRef"
                        } ]
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : ". The American College of Obstetricians and Gynecologists. Marijuana Use During Pregnancy and Lactation - ACOG. [https://www.acog.org/Clinical-Guidance-and-Publications/Committee-Opinions/Committee-on-Obstetric-Practice/Marijuana-Use-During-Pregnancy-and-Lactation](https://www.acog.org/Clinical-Guidance-and-Publications/Committee-Opinions/Committee-on-Obstetric-Practice/Marijuana-Use-During-Pregnancy-and-Lactation). Published 2019. Accessed March 12, 2020.\n",
                        "type" : "Literal"
                     } ]
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "",
                     "type" : "Literal"
                  }
               }
            }
         }, {
            "name" : "NonAlcoholRelatedCounselingSuggestionText",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "NidaQsWasPerformed",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "type" : "Concatenate",
                  "operand" : [ {
                     "type" : "Concatenate",
                     "operand" : [ {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "The National Institute on Drug Abuse (NIDA)<sup>1</sup> suggests the following when reviewing the results of the NIDA QS with patients:\n- Review the results of the NIDA QS with the patient.\n- Avoid any tone that could be considered judgmental or confrontational.\n- Offer additional counseling on the impact of the patients specific substance use and assess their readiness to quit.\n- If the patient seems responsive, offer assistance with their effort to reduce or eliminate their use of the substance(s).\n",
                        "type" : "Literal"
                     }, {
                        "name" : "TobaccoCounselingSuggestionText",
                        "type" : "ExpressionRef"
                     } ]
                  }, {
                     "name" : "DrugCounselingSuggestionText",
                     "type" : "ExpressionRef"
                  } ]
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "NonAlcoholRelatedCounselingSuggestionReferences",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "name" : "NidaQsWasPerformed",
                     "type" : "ExpressionRef"
                  }
               },
               "then" : {
                  "type" : "Concatenate",
                  "operand" : [ {
                     "type" : "Concatenate",
                     "operand" : [ {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "1. National Institute on Drug Abuse. The NIDA Quick Screen | National Institute on Drug Abuse (NIDA). [https://www.drugabuse.gov/publications/resource-guide-screening-drug-use-in-general-medical-settings/nida-quick-screen](https://www.drugabuse.gov/publications/resource-guide-screening-drug-use-in-general-medical-settings/nida-quick-screen). Accessed December 4, 2019.\n",
                        "type" : "Literal"
                     }, {
                        "name" : "TobaccoCounselingSuggestionReferences",
                        "type" : "ExpressionRef"
                     } ]
                  }, {
                     "name" : "DrugCounselingSuggestionReferences",
                     "type" : "ExpressionRef"
                  } ]
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "DrugTreatmentReferralSuggested",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "RxDrugDidDidNot",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "used",
                           "type" : "Literal"
                        } ]
                     }, {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "IllegalDrugDidDidNot",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "used",
                           "type" : "Literal"
                        } ]
                     } ]
                  }
               },
               "then" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "value" : "true",
                  "type" : "Literal"
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "value" : "false",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "NonAlcoholRelatedCounselingSuggestions",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "suggestions",
                  "value" : {
                     "name" : "NonAlcoholRelatedCounselingSuggestionText",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "references",
                  "value" : {
                     "name" : "NonAlcoholRelatedCounselingSuggestionReferences",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "referral",
                  "value" : {
                     "name" : "DrugTreatmentReferralSuggested",
                     "type" : "ExpressionRef"
                  }
               } ]
            }
         }, {
            "name" : "TobaccoPatientEducationResources",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Equal",
                     "operand" : [ {
                        "name" : "TobaccoDidDidNot",
                        "type" : "ExpressionRef"
                     }, {
                        "valueType" : "{urn:hl7-org:elm-types:r1}String",
                        "value" : "used",
                        "type" : "Literal"
                     } ]
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "PregnantAndNotDrinking",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        } ]
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "- MotherToBaby Fact Sheet about exposure to cigarette smoke in pregnancy and while breastfeeding: [https://mothertobaby.org/fact-sheets/cigarette-smoking-pregnancy/pdf/](https://mothertobaby.org/fact-sheets/cigarette-smoking-pregnancy/pdf/)\n- March of Dimes: Smoking During Pregnancy: [https://www.marchofdimes.org/pregnancy/smoking-during-pregnancy.aspx](https://www.marchofdimes.org/pregnancy/smoking-during-pregnancy.aspx)\n- Smoking, Pregnancy, and Babies: [https://www.cdc.gov/tobacco/campaign/tips/diseases/pregnancy.html](https://www.cdc.gov/tobacco/campaign/tips/diseases/pregnancy.html)\n",
                     "type" : "Literal"
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "- Planning and support to help quit smoking: [https://smokefree.gov/quit-smoking](https://smokefree.gov/quit-smoking)\n- Information and tools to Quit Smoking: [https://www.cdc.gov/tobacco/quit_smoking/index.htm](https://www.cdc.gov/tobacco/quit_smoking/index.htm)\n",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "DrugPatientEducationResources",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "If",
               "condition" : {
                  "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                  "type" : "As",
                  "operand" : {
                     "type" : "Or",
                     "operand" : [ {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "RxDrugDidDidNot",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "used",
                           "type" : "Literal"
                        } ]
                     }, {
                        "type" : "Equal",
                        "operand" : [ {
                           "name" : "IllegalDrugDidDidNot",
                           "type" : "ExpressionRef"
                        }, {
                           "valueType" : "{urn:hl7-org:elm-types:r1}String",
                           "value" : "used",
                           "type" : "Literal"
                        } ]
                     } ]
                  }
               },
               "then" : {
                  "type" : "If",
                  "condition" : {
                     "asType" : "{urn:hl7-org:elm-types:r1}Boolean",
                     "type" : "As",
                     "operand" : {
                        "type" : "Or",
                        "operand" : [ {
                           "name" : "PregnantAndNotDrinking",
                           "type" : "ExpressionRef"
                        }, {
                           "name" : "PregnantAndDrinking",
                           "type" : "ExpressionRef"
                        } ]
                     }
                  },
                  "then" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "- CDC: Opioid Use During Pregnancy: [https://www.cdc.gov/pregnancy/opioids/index.html](https://www.cdc.gov/pregnancy/opioids/index.html)\n- CDC: What You Need to Know About Marijuana Use and Pregnancy: [https://www.cdc.gov/marijuana/factsheets/pregnancy.htm](https://www.cdc.gov/marijuana/factsheets/pregnancy.htm)\n- Step by Step Guide to Finding Treatment for Drug Use Disorders: [https://www.drugabuse.gov/publications/step-by-step-guides-to-finding-treatment-drug-use-disorders/if-you-have-problem-drugs-adults](https://www.drugabuse.gov/publications/step-by-step-guides-to-finding-treatment-drug-use-disorders/if-you-have-problem-drugs-adults)\n",
                     "type" : "Literal"
                  },
                  "else" : {
                     "valueType" : "{urn:hl7-org:elm-types:r1}String",
                     "value" : "- Step by Step Guide to Finding Treatment for Drug Use Disorders: [https://www.drugabuse.gov/publications/step-by-step-guides-to-finding-treatment-drug-use-disorders/if-you-have-problem-drugs-adults](https://www.drugabuse.gov/publications/step-by-step-guides-to-finding-treatment-drug-use-disorders/if-you-have-problem-drugs-adults)\n- Helpful Materials for Patients Living With Chronic Pain: [https://www.cdc.gov/drugoverdose/patients/materials.html](https://www.cdc.gov/drugoverdose/patients/materials.html)\n- Find Treatment for Substance Use Disorder: [https://findtreatment.gov/](https://findtreatment.gov/)\n",
                     "type" : "Literal"
                  }
               },
               "else" : {
                  "valueType" : "{urn:hl7-org:elm-types:r1}String",
                  "value" : "",
                  "type" : "Literal"
               }
            }
         }, {
            "name" : "NonAlcoholRelatedPatientEducationResources",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Concatenate",
               "operand" : [ {
                  "name" : "TobaccoPatientEducationResources",
                  "type" : "ExpressionRef"
               }, {
                  "name" : "DrugPatientEducationResources",
                  "type" : "ExpressionRef"
               } ]
            }
         }, {
            "name" : "BriefInterventions",
            "context" : "Patient",
            "accessLevel" : "Public",
            "expression" : {
               "type" : "Tuple",
               "element" : [ {
                  "name" : "alcohol_screening_results_summary",
                  "value" : {
                     "name" : "AlcoholScreeningResultsSummary",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "alcohol_counseling_suggestions",
                  "value" : {
                     "name" : "AlcoholCounselingSuggestions",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "alcohol_patient_education_resources",
                  "value" : {
                     "name" : "AlcoholPatientEducationResources",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "non_alcohol_screening_results_summary",
                  "value" : {
                     "name" : "NonAlcoholScreeningResultsSummary",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "non_alcohol_related_counseling_suggestions",
                  "value" : {
                     "name" : "NonAlcoholRelatedCounselingSuggestions",
                     "type" : "ExpressionRef"
                  }
               }, {
                  "name" : "non_alcohol_related_patient_education_resources",
                  "value" : {
                     "name" : "NonAlcoholRelatedPatientEducationResources",
                     "type" : "ExpressionRef"
                  }
               } ]
            }
         } ]
      }
   }
}

